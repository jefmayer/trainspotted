(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n.p+"static/media/trainspotted-logo.f965f559.svg"},24:function(e,t,n){e.exports=n(35)},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),l=n(14),r=n.n(l),c=n(7),s=n(9),o=n(21),u=(n(33),n(8)),m=function(e){return{type:"ENTRY_ADDED",data:e}},d=function(e,t){return{type:"SHOW_DETAIL",data:e,contentType:t}},h=function(){return{type:"HIDE_DETAIL"}},b=function(){return{type:"SHOW_MENU"}},v=function(){return{type:"HIDE_MENU"}},p=function(e){var t=e.date,n=e.direction,a=e.engines,i=e.id,l=e.time,r=e.notes;return function(e){return e({type:"SUBMIT_ENTRY"}),fetch("/addEntry",{method:"POST",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify({date:t,time:l,direction:n,engines:a,id:i,notes:r})}).then(function(e){return e.json()}).then(function(t){return e(m(t))})}},f=Object(s.c)({entryData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,items:[],detail:{},id:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_ENTRIES":case"SUBMIT_ENTRY":case"DELETE_ENTRY":return Object(u.a)({},e,{isFetching:!0});case"RECEIVE_ENTRIES":case"ENTRY_ADDED":case"ENTRY_DELETED":return Object(u.a)({},e,{isFetching:!1,items:t.data});default:return e}},detail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isOpen:!1,data:{},contentType:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_DETAIL":return Object(u.a)({},e,{isOpen:!0,data:t.data,contentType:t.contentType});case"HIDE_DETAIL":return Object(u.a)({},e,{isOpen:!1,data:t.data,contentType:t.contentType});default:return e}},menu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isOpen:!1};switch((arguments.length>1?arguments[1]:void 0).type){case"SHOW_MENU":return Object(u.a)({},e,{isOpen:!0});case"HIDE_MENU":return Object(u.a)({},e,{isOpen:!1});default:return e}},trainLines:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,items:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_LINES":case"SUBMIT_TRAIN_LINE":return Object(u.a)({},e,{isFetching:!0});case"RECEIVE_LINES":case"TRAIN_LINE_ADDED":return Object(u.a)({},e,{isFetching:!1,items:t.data});default:return e}},userStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoggedIn:!1,isLoginError:!1,response:[{success:"error"}]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN":return"success"===t.data[0].success?Object(u.a)({},e,{isLoggedIn:!0,isLoginError:!1,response:t.data}):Object(u.a)({},e,{isLoggedIn:!1,isLoginError:!0,response:t.data});case"LOG_OUT":return Object(u.a)({},e,{isLoggedIn:!1});default:return e}}}),g=n(2),E=n(3),y=n(6),N=n(4),O=n(5),j=n(1),C=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(n=Object(y.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(i)))).onFilterClick=function(){var e=n.props,t=e.label;(0,e.onFilterClick)(t)},n}return Object(O.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isActive,n=e.label;return i.a.createElement("li",{key:n},i.a.createElement("button",{className:t?"active":"",onClick:this.onFilterClick,type:"button"},i.a.createElement("span",null,n)))}}]),t}(a.Component),S=n(23);function k(e){var t=e.split("-");return"".concat(t[1],"/").concat(t[2],"/").concat(t[0])}function D(e){var t=e.split(":"),n=parseInt(t[0],10),a="AM";return n>12?(n-=12,a="PM"):12===n?a="PM":0===n&&(n=12),"".concat(n,":").concat(t[1],":00 ").concat(a)}function M(e){var t=e.getDate().toString();1===t.length&&(t="0".concat(t));var n=(e.getMonth()+1).toString();return 1===n.length&&(n="0".concat(n)),"".concat(e.getFullYear(),"-").concat(n,"-").concat(t)}function L(e){var t="",n="";if("string"===typeof e){var a=e.split(":"),i=Object(S.a)(a,2);t=i[0],n=i[1]}else t=e.getHours().toString(),n=e.getMinutes().toString();return 1===t.length&&(t="0".concat(t)),1===n.length&&(n="0".concat(n)),"".concat(t,":").concat(n)}function w(e,t){var n=e.split("-"),a=t.split(":");return"".concat(n[0]).concat(n[1]).concat(n[2]).concat(a[0]).concat(a[1])}function I(){return"key-".concat(Math.round(1e3*Math.random()*Math.random()*1e3/Math.random()*1e3+1e3*Math.random()))}var T=n(10),R=n(12),x=[{full:"Sunday",short:"S",index:0},{full:"Monday",short:"M",index:1},{full:"Tuesday",short:"T",index:2},{full:"Wednesday",short:"W",index:3},{full:"Thursday",short:"T",index:4},{full:"Friday",short:"F",index:5},{full:"Saturday",short:"S",index:6}];function A(e,t){var n=e.getDate();return e.setMonth(e.getMonth()+t),e.getDate()!==n&&e.setDate(0),e}function F(e){var t=e.split(":"),n=parseInt(t[1],10);return-1!==t[2].indexOf("PM")&&"12"!==t[0]?n+=60*(parseInt(t[0],10)+12):n+=60*parseInt(t[0],10),n}var _=function(e){return e.entryData.items},P=function(e){return e.trainLines.items},V=Object(R.a)([_,P],function(e,t){var n=[];return e.map(function(e){return e.engines.map(function(a){return n.push({line:a.line,day:new Date(e.date).getDay(),time:"".concat(Math.round(F(e.time)/14.4),"%"),color:t.find(function(e){return a.line===e.name}).color})})}),n.reduce(function(e,t){return e.find(function(e){return e.day===t.day&&e.time===t.time})?e:e.concat([t])},[]).map(function(e){return Object(u.a)({},e,{values:n.filter(function(t){return t.day===e.day&&t.time===e.time}).map(function(e){return Object(u.a)({},e,{occurance:"".concat(n.filter(function(t){return e.day===t.day&&e.time===t.time&&t.line===e.line}).length/n.filter(function(t){return e.day===t.day&&e.time===t.time}).length*100,"%")})}).reduce(function(e,t){return e.find(function(e){return e.line===t.line})?e:e.concat([t])},[]).sort(function(e,t){return e.line.localeCompare(t.line)})})})}),U=Object(R.a)([_,P],function(e,t){var n=[];e.forEach(function(e){return e.engines.forEach(function(a){return n.push({engine:"".concat(t.find(function(e){return a.line===e.name}).short,", ").concat(a.number),line:a.line,number:a.number,entryId:e._id,date:e.date,color:t.find(function(e){return a.line===e.name}).color})})});var a=new Set;return n.filter(function(e){return a.size===a.add(e.engine).size}).reduce(function(e,t){return e.find(function(e){return e.engine===t.engine})?e:e.concat([t])},[]).map(function(e){var t=n.filter(function(t){return e.engine===t.engine}).map(function(e){return{date:e.date,entryId:e.entryId}}).sort(function(e,t){return new Date(e.date)-new Date(t.date)});return{engine:e.engine,line:e.line,number:e.number,dates:t,entryId:e.entryId,color:e.color}}).sort(function(e,t){return new Date(e.dates[0].date)-new Date(t.dates[0].date)})}),W=Object(R.a)([_,P],function(e,t){return t.map(function(t){return{name:t.name,value:e.reduce(function(e,n){return e+n.engines.filter(function(e){return e.line===t.name}).length},0)}}).sort(function(e,t){return t.value-e.value})[0]}),Y=(Object(R.a)([_,P],function(e,t){return t.map(function(t){return{name:t.name,days:x.map(function(n){return{full:n.full,short:n.short,index:n.index,value:e.reduce(function(e,a){return e+a.engines.filter(function(e){return e.line===t.name&&new Date(a.date).getDay()===n.index}).length},0)}})}})}),Object(R.a)([_,P],function(e){var t=Object(T.a)(e).sort(function(e,t){return new Date(e.date)-new Date(t.date)}),n=new Date(t[0].date);return"".concat(n.getMonth()+1,"/1/").concat(n.getFullYear())})),H=Object(R.a)([_,P],function(e){var t=Object(T.a)(e).sort(function(e,t){return new Date(e.date)-new Date(t.date)}),n=new Date(t[0].date);return"".concat(n.getMonth()+1,"/").concat(n.getDate(),"/").concat(n.getFullYear())}),B=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(y.a)(this,Object(N.a)(t).call(this,e))).tableRef=i.a.createRef(),n}return Object(O.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.tableRef.current.classList.remove("initial-state")},100)}},{key:"getEngineCountByLine",value:function(e){return this.props.entries.reduce(function(t,n){return t+n.engines.filter(function(t){return t.line===e}).length},0)}},{key:"render",value:function(){var e=this,t=this.props,n=t.entries,a=t.initialSightingDate,l=t.lineWithMostSightings,r=t.trainLineList,c=100*Math.ceil(l.value/100),s=c/10,o=[0],u=0;do{u+=s,o.push(u)}while(u<c);return i.a.createElement("div",{className:"data-table engine-values-table initial-state",ref:this.tableRef},i.a.createElement("div",{className:"table-title"},i.a.createElement("h3",null,n.reduce(function(e,t){return e+t.engines.length},0),"\xa0diesel engines have been observed since\xa0",a)),i.a.createElement("div",{className:"y-axis"},r.map(function(t){var n={backgroundColor:t.color,transform:"scaleX(".concat(e.getEngineCountByLine(t.name)/c,")")};return i.a.createElement("div",{className:"y-axis-row",key:t.id},i.a.createElement("div",{className:"row-label"},t.name),i.a.createElement("div",{className:"row-axis"}),i.a.createElement("div",{className:"value-display",style:n}))})),i.a.createElement("div",{className:"x-axis"},i.a.createElement("div",{className:"data-set"},i.a.createElement("ul",{className:"data-set-values"},o.map(function(e){return i.a.createElement("li",{key:I()},e)})))))}}]),t}(a.Component),J=Object(c.b)(function(e){var t=e.entryData,n=e.trainLines,a=t.items,i=n.items;return{entries:a,initialSightingDate:H(e),lineWithMostSightings:W(e),trainLineList:i}})(B),G=function(e){function t(){return Object(g.a)(this,t),Object(y.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(E.a)(t,[{key:"getDirectionPercentage",value:function(){var e=this.props.entries,t=e.filter(function(e){return"north"===e.direction}),n=Math.round(t.length/e.length*100);return"".concat(Number.isNaN(n)?"...":n,"%")}},{key:"getLineWithMostSightings",value:function(){var e=this.props,t=e.entries;return e.trainLineList.map(function(e){return{name:e.name,value:t.reduce(function(t,n){return t+n.engines.filter(function(t){return t.line===e.name}).length},0)}}).sort(function(e,t){return t.value-e.value})[0]}},{key:"getDistinctResightings",value:function(){var e=this.props.resightings,t=[];return e.map(function(e){return e.dates.reduce(function(n,a,i,l){return t.push({engine:e.engine,time:(r=new Date(a.date),c=new Date(l[Math.min(i+1,l.length-1)].date),Math.round((c-r)/864e5))});var r,c},0)}),t.filter(function(e){return 0!==e.time})}},{key:"render",value:function(){var e=this.props,t=e.trainLineList,n=e.entries,a=e.lineWithMostSightings,l=e.resightings,r=this.getDistinctResightings(),c=a;c||(c={name:"",value:"..."});var s=Math.round(r.reduce(function(e,t){return e+t.time},0)/r.length);Number.isNaN(s)&&(s=0);var o=r.reduce(function(e,t){return Math.min(e,t.time)},1/0);o===1/0&&(o=0);var u=Object(T.a)(l).sort(function(e,t){return t.dates.length-e.dates.length})[0],m={line:"",number:""},d=0;return u&&(m=u.engine,d=u.dates.length,u=n.find(function(e){return e._id===u.entryId}),m=u.engines.find(function(e){return-1!==m.indexOf(e.number)})),i.a.createElement("div",{className:"data-table"},i.a.createElement("div",{className:"table-title"},i.a.createElement("h3",null,"Overview of findings based on observational train data")),i.a.createElement("div",{className:"table-values-grid"},i.a.createElement("div",{className:"table-value"},i.a.createElement("div",{className:"heading-xl"},t.length),i.a.createElement("div",{className:"body-copy"},"Different Freight Lines Observed")),i.a.createElement("div",{className:"table-value"},i.a.createElement("div",{className:"heading-xl"},n.length),i.a.createElement("div",{className:"body-copy"},"Number of Trains Observed")),i.a.createElement("div",{className:"table-value"},i.a.createElement("div",{className:"heading-xl"},n.reduce(function(e,t){return e+t.engines.length},0)),i.a.createElement("div",{className:"body-copy"},"Number of Diesel Engines")),i.a.createElement("div",{className:"table-value"},i.a.createElement("div",{className:"heading-xl"},c.value),i.a.createElement("div",{className:"body-copy"},c.name,"\xa0is Observed Most Often")),i.a.createElement("div",{className:"table-value"},i.a.createElement("div",{className:"heading-xl"},this.getDirectionPercentage()),i.a.createElement("div",{className:"body-copy"},"Percentage of Trains Headed North")),i.a.createElement("div",{className:"table-value"},i.a.createElement("div",{className:"heading-xl"},l.reduce(function(e,t){return e+t.dates.length-1},0)),i.a.createElement("div",{className:"body-copy"},"Number of Engine Resightings*")),i.a.createElement("div",{className:"table-value"},i.a.createElement("div",{className:"heading-xl"},s),i.a.createElement("div",{className:"body-copy"},"Average Number of Days Between a Resighting")),i.a.createElement("div",{className:"table-value"},i.a.createElement("div",{className:"heading-xl"},o),i.a.createElement("div",{className:"body-copy"},"Fewest Days Between a Resighting")),i.a.createElement("div",{className:"table-value"},i.a.createElement("div",{className:"heading-xl"},r.reduce(function(e,t){return Math.max(e,t.time)},0)),i.a.createElement("div",{className:"body-copy"},"Most Days Between a Resighting")),i.a.createElement("div",{className:"table-value"},i.a.createElement("div",{className:"heading-xl"},d),i.a.createElement("div",{className:"body-copy"},m.line,"\xa0",m.number,"\xa0Has the Most Resightings"))),i.a.createElement("div",{className:"table-notes"},i.a.createElement("p",{className:"body-xsmall"},"*Resightings are the engines I\u2019ve observed on multiple occasions. It\u2019s entirely possible, more so likely, that these and others have passed back and forth at off hours. Some other observations:")))}}]),t}(a.Component),Q=Object(c.b)(function(e){var t=e.entryData.items,n=e.trainLines.items,a=U(e);return{entries:t,lineWithMostSightings:W(e),resightings:a,trainLineList:n}})(G),z=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(y.a)(this,Object(N.a)(t).call(this,e))).tableRef=i.a.createRef(),n.yAxis=null,n.scrollIndicatorRef=i.a.createRef(),n.handleScroll=n.handleScroll.bind(Object(j.a)(n)),n.scrollIndicatorTimer=null,n}return Object(O.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.scrollIndicatorTimer=setTimeout(function(){e.scrollIndicatorRef.current.classList.add("hidden"),e.yAxis.removeEventListener("scroll",e.handleScroll)},3e3),this.yAxis=this.tableRef.current.querySelector(".y-axis"),this.yAxis.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll),clearInterval(this.scrollIndicatorTimer)}},{key:"handleScroll",value:function(){this.scrollIndicatorRef.current.classList.add("hidden"),this.yAxis.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.initialSightingDate,a=e.initialSightingMonthStart,l=e.resightings,r=function(e,t){var n=A(t,1),a=12*(n.getFullYear()-e.getFullYear());return a-=e.getMonth(),(a+=n.getMonth()+2)%2!==0&&(n=A(t,1)),new Date("".concat(n.getMonth()+1,"/1/").concat(n.getFullYear()))}(new Date(a),new Date),c=function(e,t){var n=12*(t.getFullYear()-e.getFullYear());n-=e.getMonth(),n+=t.getMonth()+1;var a=[],i=0,l=e;do{a.push("".concat(l.getMonth()+1,"/").concat(l.getFullYear().toString().substr(2))),l=A(l,2),i+=1}while(i<=n/2);return a}(new Date(a),r),s="",o=!1;return i.a.createElement("div",{className:"data-table resightings-values-table",ref:this.tableRef},i.a.createElement("div",{className:"table-title"},i.a.createElement("h3",null,l.reduce(function(e,t){return e+t.dates.length-1},0),"\xa0repeated sightings of\xa0",l.length,"\xa0engines since\xa0",n)),i.a.createElement("div",{className:"y-axis"},l.map(function(e){return s="",o=!1,i.a.createElement("div",{className:"y-axis-row",key:I()},i.a.createElement("div",{className:"row-label"},e.engine),i.a.createElement("div",{className:"row-axis"},e.dates.map(function(n){var l="".concat(100*function(e,t,n){return(e-t)/(n-t)}(new Date(n.date),new Date(a),r),"%"),c={backgroundColor:e.color,left:l},u={backgroundColor:e.color,left:s,width:"calc(".concat(l," - ").concat(s,")")};return""!==s&&(o=!0),s=l,i.a.createElement("div",{key:I()},i.a.createElement("button",{className:"sighting-marker",onClick:function(){t(d({line:e.line,number:e.number,engines:e.dates},"resighting"))},style:c,type:"button"},i.a.createElement("span",null,e.engine.substr(e.engine.indexOf(",")+2))),o&&i.a.createElement("div",{className:"sighting-connector",style:u}))})))})),i.a.createElement("div",{className:"x-axis"},i.a.createElement("div",{className:"data-set"},i.a.createElement("ul",{className:"data-set-values"},c.map(function(e){return i.a.createElement("li",{key:I()},e)})))),i.a.createElement("div",{className:"scroll-indicator-icon",ref:this.scrollIndicatorRef},i.a.createElement("div",null)))}}]),t}(a.Component),q=Object(c.b)(function(e){var t=U(e);return{initialSightingDate:H(e),initialSightingMonthStart:Y(e),resightings:t}},function(e){return Object(u.a)({dispatch:e},Object(s.b)({showDetail:d},e))})(z),X=function(e){function t(e){return Object(g.a)(this,t),Object(y.a)(this,Object(N.a)(t).call(this,e))}return Object(O.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.dataSet,n=e.entries;return i.a.createElement("div",{className:"data-table schedule-values-table"},i.a.createElement("div",{className:"table-title"},i.a.createElement("h3",null,"Times during the week when the various freight train lines have been observed")),i.a.createElement("div",{className:"y-axis"},x.map(function(e){return i.a.createElement("div",{className:"y-axis-row",key:e.index},i.a.createElement("div",{className:"row-label"},e.full),i.a.createElement("div",{className:"row-axis"}))})),i.a.createElement("div",{className:"x-axis"},i.a.createElement("div",{className:"data-set"},i.a.createElement("ul",{className:"data-set-values"},t.map(function(e){return i.a.createElement("li",{key:I()},e)})))),i.a.createElement("div",{className:"scatterplot"},n.map(function(e){var t={left:e.time,top:"".concat(40*e.day,"px")};return i.a.createElement("button",{className:"line-group",key:I(),style:t,type:"button"},e.values.map(function(e){var t={backgroundColor:e.color,height:e.occurance};return i.a.createElement("div",{className:"line-group-item",key:I(),style:t})}))})))}}]),t}(a.Component);X.defaultProps={dataSet:["12 AM","2 AM","4AM","6 AM","8 AM"," 10 AM","12 PM","2 PM","4 PM","6 PM","8 PM","10 PM","12 AM"]};var K=Object(c.b)(function(e){return{entries:V(e)}})(X),Z=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(y.a)(this,Object(N.a)(t).call(this,e))).state={activeSet:{label:"",values:[]}},n.handleDataSetChange=n.handleDataSetChange.bind(Object(j.a)(n)),n}return Object(O.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.dataSets;this.setState({activeSet:e[0]})}},{key:"handleDataSetChange",value:function(e){var t=this.props.dataSets.find(function(t){return t.label===e});this.setState({activeSet:t})}},{key:"render",value:function(){var e=this,t=this.props.dataSets,n=this.state.activeSet;return i.a.createElement("div",{className:"at-a-glance"},i.a.createElement("div",{className:"page-heading-divider"},i.a.createElement("h2",{className:"heading-lg"},"At A Glance")),i.a.createElement("div",{className:"aggregate-data-visualization-module"},i.a.createElement("div",{className:"module-inner"},i.a.createElement("div",{className:"data-filters"},i.a.createElement("ul",{className:"data-filters-inner"},t.map(function(t){return i.a.createElement(C,{isActive:t.label===n.label,key:t.label,label:t.label,onFilterClick:e.handleDataSetChange})}))),i.a.createElement("div",{className:"data-visualization"},"Overview"===n.label&&i.a.createElement(Q,null),"Resightings"===n.label&&i.a.createElement(q,null),"Engines"===n.label&&i.a.createElement(J,null),"Schedule"===n.label&&i.a.createElement(K,null)))))}}]),t}(a.Component);Z.defaultProps={dataSets:[{label:"Overview"},{label:"Resightings"},{label:"Engines"},{label:"Schedule"}]};var $=Z,ee=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(y.a)(this,Object(N.a)(t).call(this,e))).divRef=i.a.createRef(),n.onEntryClick=n.onEntryClick.bind(Object(j.a)(n)),n}return Object(O.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.entry,t=e.time.split(":");-1!==e.time.indexOf("PM")&&(-1===e.time.indexOf("12:")||e.time.indexOf("12:")>0)&&(t[0]=parseInt(t[0],10)+12),-1!==e.time.indexOf("AM")&&0===e.time.indexOf("12:")&&(t[0]=parseInt(t[0],10)-12);var n=((3600*t[0]+60*parseInt(t[1],10))/864).toFixed(2);this.divRef.current.setAttribute("style","left:".concat(n,"%;"))}},{key:"onEntryClick",value:function(){var e=this.props,t=e.entry;(0,e.dispatch)(d(t,"entry"))}},{key:"render",value:function(){var e=this.props.entry;return i.a.createElement("button",{className:"engine-manifest",ref:this.divRef,type:"button",onClick:this.onEntryClick},e.engines.map(function(e){var t={backgroundColor:e.color};return i.a.createElement("span",{className:"engine-number",style:t,key:e.number},e.number)}),i.a.createElement("span",{className:"engine-details-button"},"..."))}}]),t}(a.Component),te=Object(c.b)(function(e){return Object(s.b)({showDetail:d},e)})(ee),ne=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(y.a)(this,Object(N.a)(t).call(this,e))).divRef=i.a.createRef(),n.entryHeight=0,n}return Object(O.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.divRef.current.setAttribute("style","height:".concat(this.entryHeight,"px;"))}},{key:"render",value:function(){var e=this,t=this.props,n=t.date,a=t.entries;return i.a.createElement("div",{className:"entries-for-date",ref:this.divRef},a.map(function(t){return t.date===n?(e.entryHeight<20*t.engines.length&&(e.entryHeight=20*(t.engines.length+1)),i.a.createElement(te,{key:t._id,entry:t})):""}))}}]),t}(a.Component),ae=["January","February","March","April","May","June","July","August","September","October","November","December"],ie=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(y.a)(this,Object(N.a)(t).call(this,e))).divRef=i.a.createRef(),n}return Object(O.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.activeMonth,n=e.date,a=e.entries,l=e.isMonthLabel,r=ae[n.split("/")[0]-1],c=n.split("/")[2];return i.a.createElement("div",{className:"date-line",ref:this.divRef},l&&i.a.createElement("div",{className:"month-display ".concat("".concat(r,"-").concat(c)===t?"sticky":""),"data-month":"".concat(r,"-").concat(c)},i.a.createElement("span",null,"".concat(r," ").concat(c))),i.a.createElement("div",{className:"date-display"},i.a.createElement("span",null,n.split("/")[1])),i.a.createElement(ne,{date:n,entries:a}))}}]),t}(a.Component),le=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(y.a)(this,Object(N.a)(t).call(this,e))).state={activeMonth:""},n.handleScroll=n.handleScroll.bind(Object(j.a)(n)),n.currentMonth=-1,n.chartWrapperRef=i.a.createRef(),n}return Object(O.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(){var e=window.pageYOffset||document.documentElement.scrollTop,t="";[].map.call(document.querySelectorAll(".month-display"),function(n){n.parentNode.getBoundingClientRect().top+e<window.pageYOffset&&(t=n.getAttribute("data-month"))}),this.setState({activeMonth:t}),null!==this.chartWrapperRef&&(this.chartWrapperRef.current.getBoundingClientRect().top+e<window.pageYOffset?this.chartWrapperRef.current.classList.add("sticky"):this.chartWrapperRef.current.classList.remove("sticky"))}},{key:"render",value:function(){var e=this,t=this.props.entries,n=this.state.activeMonth,a=Object(T.a)(new Set(t.map(function(e){return e.date}))),l=!1;return i.a.createElement("div",{className:"train-chart-wrapper",ref:this.chartWrapperRef},i.a.createElement("div",{className:"page-heading-divider fixed-page-heading-divider"},i.a.createElement("h2",{className:"heading-lg"},"Sightings")),i.a.createElement("div",{className:"train-chart"},i.a.createElement("div",{className:"x-axis-header clearfix"},i.a.createElement("div",{className:"page-heading-divider"},i.a.createElement("h2",{className:"heading-lg"},"Sightings")),i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("span",null,"12 AM")),i.a.createElement("li",null,i.a.createElement("span",null,"2 AM")),i.a.createElement("li",null,i.a.createElement("span",null,"4 AM")),i.a.createElement("li",null,i.a.createElement("span",null,"6 AM")),i.a.createElement("li",null,i.a.createElement("span",null,"8 AM")),i.a.createElement("li",null,i.a.createElement("span",null,"10 AM")),i.a.createElement("li",null,i.a.createElement("span",null,"12 PM")),i.a.createElement("li",null,i.a.createElement("span",null,"2 PM")),i.a.createElement("li",null,i.a.createElement("span",null,"4 PM")),i.a.createElement("li",null,i.a.createElement("span",null,"6 PM")),i.a.createElement("li",null,i.a.createElement("span",null,"8 PM")),i.a.createElement("li",null,i.a.createElement("span",null,"10 PM")))),i.a.createElement("div",{className:"time-table"},i.a.createElement("div",{className:"month-bar"}),a.map(function(a){return e.currentMonth!==a.split("/")[0]?(e.currentMonth=a.split("/")[0],l=!0):l=!1,i.a.createElement(ie,{activeMonth:n,key:a.replace(/\//,""),date:a,entries:t,isMonthLabel:l})}))))}}]),t}(a.Component),re=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(y.a)(this,Object(N.a)(t).call(this,e))).state={line:"",location:"",number:""},n.handleLineChange=n.handleLineChange.bind(Object(j.a)(n)),n.handleNumberChange=n.handleNumberChange.bind(Object(j.a)(n)),n.handleLocationChange=n.handleLocationChange.bind(Object(j.a)(n)),n.isEngineValid=n.isEngineValid.bind(Object(j.a)(n)),n.handleRemove=n.handleRemove.bind(Object(j.a)(n)),n}return Object(O.a)(t,e),Object(E.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.line,n=e.location,a=e.number;this.setState({line:t,location:n,number:a})}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.id,n=e.updateEngines,a=this.state,i=a.line,l=a.location,r=a.number;n(t,this.isEngineValid(),i,l,r)}},{key:"handleLineChange",value:function(e){this.setState({line:e.target.value})}},{key:"handleNumberChange",value:function(e){this.setState({number:e.target.value})}},{key:"handleLocationChange",value:function(e){this.setState({location:e.target.value})}},{key:"handleRemove",value:function(){var e=this.props,t=e.id;(0,e.removeEngine)(t)}},{key:"isEngineValid",value:function(){var e=this.state,t=e.line,n=e.location,a=e.number;return""!==t&&""!==n&&""!==a}},{key:"render",value:function(){var e=this.props.trainLineList,t=this.state,n=t.line,a=t.location,l=t.number;return i.a.createElement("div",{className:"flex-row add-engine-row"},i.a.createElement("label",{className:"form-label form-select-label form-label-line",htmlFor:"line"},i.a.createElement("span",null,"Line"),i.a.createElement("select",{className:"form-select",id:"line",name:"line",value:n,onChange:this.handleLineChange},i.a.createElement("option",{value:""},"Select"),e.map(function(e){return i.a.createElement("option",{value:e.name,key:e.id},e.short)}))),i.a.createElement("label",{className:"form-label form-label-number",htmlFor:"number"},i.a.createElement("span",null,"Number"),i.a.createElement("input",{className:"form-input",id:"number",name:"number",type:"number",value:l,onChange:this.handleNumberChange})),i.a.createElement("label",{className:"form-label form-select-label form-label-location",htmlFor:"location"},i.a.createElement("span",null,"Location"),i.a.createElement("select",{className:"form-select",id:"location",name:"location",value:a,onChange:this.handleLocationChange},i.a.createElement("option",{value:""},"Select"),i.a.createElement("option",{value:"front"},"Front"),i.a.createElement("option",{value:"middle"},"Middle"),i.a.createElement("option",{value:"end"},"End"))),i.a.createElement("button",{className:"remove-button",type:"button",onClick:this.handleRemove}))}}]),t}(a.Component),ce=function(e){function t(e){var n;Object(g.a)(this,t);var a=(n=Object(y.a)(this,Object(N.a)(t).call(this,e))).props.entryData;return a.engines=a.engines.map(function(e,t){return Object(u.a)({},e,{id:"engine-no-".concat(t)})}),n.state={date:M(new Date(a.date)),direction:a.direction,engines:a.engines,idIter:a.engines.length,isActive:!1,isEntryValid:!0,notes:a.notes,time:L(a.time)},n.handleDateChange=n.handleDateChange.bind(Object(j.a)(n)),n.handleTimeChange=n.handleTimeChange.bind(Object(j.a)(n)),n.handleDirectionChange=n.handleDirectionChange.bind(Object(j.a)(n)),n.handleNotesChange=n.handleNotesChange.bind(Object(j.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(j.a)(n)),n.handleCancel=n.handleCancel.bind(Object(j.a)(n)),n.handleRemove=n.handleRemove.bind(Object(j.a)(n)),n.showForm=n.showForm.bind(Object(j.a)(n)),n.hideForm=n.hideForm.bind(Object(j.a)(n)),n.addEngine=n.addEngine.bind(Object(j.a)(n)),n.removeEngine=n.removeEngine.bind(Object(j.a)(n)),n.updateEngines=n.updateEngines.bind(Object(j.a)(n)),n}return Object(O.a)(t,e),Object(E.a)(t,[{key:"handleDateChange",value:function(e){this.setState({date:e.target.value})}},{key:"handleTimeChange",value:function(e){this.setState({time:e.target.value})}},{key:"handleDirectionChange",value:function(e){this.setState({direction:e.target.value})}},{key:"handleNotesChange",value:function(e){this.setState({notes:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this.props.dispatch,n=this.state,a=n.date,i=n.direction,l=n.engines,r=n.notes,c=n.time,s=!0;e.preventDefault(),l.forEach(function(e){e.isValid||(s=!1)}),s&&(t(p({date:k(a),direction:i,engines:l.map(function(e,t){return{line:e.line,number:e.number,order:t+1,location:e.location}}),id:w(a,c),notes:r,time:D(c)})),this.hideForm()),this.setState({isEntryValid:s})}},{key:"handleCancel",value:function(){this.hideForm()}},{key:"handleRemove",value:function(){var e=this.props,t=e.dispatch,n=e.entryData;this.hideForm(),t(function(e){var t=e.id;return function(e){return e({type:"DELETE_ENTRY"}),fetch("/deleteEntry",{method:"POST",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify({id:t})}).then(function(e){return e.json()}).then(function(t){return e(function(e){return{type:"ENTRY_DELETED",data:e}}(t))})}}({id:n._id}))}},{key:"showForm",value:function(){this.setState({isActive:!0})}},{key:"hideForm",value:function(){this.setState({isActive:!1})}},{key:"addEngine",value:function(){var e=this.state,t=e.engines,n=e.idIter+1;t.push({id:"engine-no-".concat(n),line:"",number:"",location:"",isValid:!1}),this.setState({idIter:n}),this.setState({engines:t})}},{key:"removeEngine",value:function(e){var t=this.state.engines,n=t.findIndex(function(t){return t.id===e});t.splice(n,1),this.setState({engines:t})}},{key:"updateEngines",value:function(e,t,n,a,i){var l=this.state.engines.find(function(t){return t.id===e});null!==l&&(l.line=n,l.location=a,l.number=i,l.isValid=t)}},{key:"render",value:function(){var e=this,t=this.props.trainLineList,n=this.state,a=n.date,l=n.direction,r=n.engines,c=n.isActive,s=n.isEntryValid,o=n.notes,u=n.time,m="hidden";return s||(m=""),i.a.createElement("div",{className:"form-wrapper"},c?i.a.createElement("button",{className:"edit-entry-button",onClick:this.hideForm,type:"button"},i.a.createElement("div",null,i.a.createElement("span",{className:"text-button"},"Close Edit"))):i.a.createElement("button",{className:"edit-entry-button",onClick:this.showForm,type:"button"},i.a.createElement("div",null,i.a.createElement("span",{className:"text-button"},"Edit Entry"))),i.a.createElement("form",{className:"login-form app-form ".concat(c?"":"hidden"),onSubmit:this.handleSubmit},i.a.createElement("label",{className:"form-label form-label-date",htmlFor:"date"},i.a.createElement("span",null,"Date"),i.a.createElement("input",{className:"form-input",id:"date",name:"date",type:"date",value:a,onChange:this.handleDateChange})),i.a.createElement("div",{className:"flex-row"},i.a.createElement("label",{className:"form-label form-label-time",htmlFor:"time"},i.a.createElement("span",null,"Time"),i.a.createElement("input",{className:"form-input",id:"time",name:"time",type:"time",value:u,onChange:this.handleTimeChange})),i.a.createElement("label",{className:"form-label form-select-label form-label-direction",htmlFor:"direction"},i.a.createElement("span",null,"Direction"),i.a.createElement("select",{className:"form-select",id:"direction",name:"direction",value:l,onChange:this.handleDirectionChange},i.a.createElement("option",{value:"north"},"North"),i.a.createElement("option",{value:"south"},"South")))),r.map(function(n){return i.a.createElement(re,{id:n.id,key:n.id,line:n.line,location:n.location,number:n.number,removeEngine:e.removeEngine,trainLineList:t,updateEngines:e.updateEngines})}),i.a.createElement("button",{className:"text-button add-engine-button",type:"button",onClick:this.addEngine},"Add Another Engine"),i.a.createElement("label",{className:"form-label form-label-notes",htmlFor:"notes"},i.a.createElement("span",null,"Notes"),i.a.createElement("textarea",{className:"form-textarea",id:"notes",name:"notes",value:o,onChange:this.handleNotesChange})),i.a.createElement("div",{className:"form-action-buttons"},i.a.createElement("button",{className:"submit-button",type:"submit"},"Update Entry"),i.a.createElement("button",{className:"urgent-button",type:"button",onClick:this.handleRemove},"Remove Entry")),i.a.createElement("div",{className:"form-error ".concat(m)},"There was an error updating the entry. Please try again.")))}}]),t}(a.Component),se=Object(c.b)(function(e){return{trainLineList:e.trainLines.items}})(ce),oe=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(y.a)(this,Object(N.a)(t).call(this,e))).state={loadedClass:""},n.onResightingClick=n.onResightingClick.bind(Object(j.a)(n)),n}return Object(O.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=setTimeout(function(){e.setState({loadedClass:"detail-loaded"}),clearInterval(t)},250)}},{key:"onResightingClick",value:function(e,t,n){(0,this.props.dispatch)(d({line:e,number:t,engines:n},"resighting"))}},{key:"findMatches",value:function(e,t){var n=this.props,a=n.resightings,i=n.trainLineList,l="".concat(i.find(function(t){return e===t.name}).short,", ").concat(t),r=a.find(function(e){return e.engine===l});return r?r.dates:null}},{key:"render",value:function(){var e=this,t=this.props,n=t.onDetailClose,a=t.data,l=t.isLoggedIn,r=this.state.loadedClass;return i.a.createElement("div",{className:"detail-overlay ".concat(r)},i.a.createElement("div",{className:"detail-bg",role:"none",onClick:n}),i.a.createElement("div",{className:"detail-panel"},i.a.createElement("div",{className:"detail-header"},i.a.createElement("div",{className:"detail-header-inner"},i.a.createElement("span",{className:"header-title"},"Entry No.\xa0",a.number),i.a.createElement("button",{className:"close-button",type:"button",onClick:n}))),i.a.createElement("div",{className:"detail-body"},i.a.createElement("div",{className:"detail-body-inner"},i.a.createElement("div",{className:"detail-headline"},"".concat(a.engines.length," engine train observed on ").concat(function(e,t){var n=e.split("/");return"".concat(t[n[0]-1]," ").concat(n[1],", ").concat(n[2])}(a.date,ae)," at ").concat(function(e){var t=e.split(":"),n="a.m.";return-1!==e.indexOf("PM")&&(n="p.m."),"".concat(t[0],":").concat(t[1]," ").concat(n)}(a.time)," heading ").concat(a.direction,".")),i.a.createElement("div",{className:"detail-subhead"},"Engines"),i.a.createElement("table",{className:"detail-table",cellPadding:"0",cellSpacing:"0"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Ord."),i.a.createElement("th",null,"Line"),i.a.createElement("th",null,"No."),i.a.createElement("th",null,"Loc."),i.a.createElement("th",null,"Sightings"))),i.a.createElement("tbody",null,a.engines.map(function(t){var n={backgroundColor:t.color},a=e.findMatches(t.line,t.number);return i.a.createElement("tr",{key:t.number},i.a.createElement("td",null,i.a.createElement("span",{className:"engine-color-indicator",style:n},t.order)),i.a.createElement("td",null,i.a.createElement("span",null,t.line)),i.a.createElement("td",null,i.a.createElement("span",null,t.number)),i.a.createElement("td",null,i.a.createElement("span",null,t.location)),i.a.createElement("td",null,a?i.a.createElement("button",{className:"simple-text-button",type:"button",onClick:function(){return e.onResightingClick(t.line,t.number,a)}},a.length):i.a.createElement("span",null,"1")))}))),i.a.createElement("div",{className:"detail-subhead"},"Notes"),i.a.createElement("p",{className:"detail-notes"},a.notes))),l&&i.a.createElement(se,{entryData:a})))}}]),t}(a.Component),ue=Object(c.b)(function(e){var t=e.trainLines,n=e.userStatus,a=t.items;return{isLoggedIn:n.isLoggedIn,resightings:U(e),trainLineList:a}},function(e){return Object(u.a)({dispatch:e},Object(s.b)({showDetail:d},e))})(oe),me=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(y.a)(this,Object(N.a)(t).call(this,e))).state={loadedClass:""},n.onDateClick=n.onDateClick.bind(Object(j.a)(n)),n}return Object(O.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=setTimeout(function(){e.setState({loadedClass:"detail-loaded"}),clearInterval(t)},250)}},{key:"onDateClick",value:function(e){var t=this.props,n=t.dispatch,a=t.entries;n(d(a.find(function(t){return t._id===e}),"entry"))}},{key:"render",value:function(){var e=this,t=this.props,n=t.onDetailClose,a=t.data,l=t.entries,r=this.state.loadedClass;return i.a.createElement("div",{className:"detail-overlay ".concat(r)},i.a.createElement("div",{className:"detail-bg",role:"none",onClick:n}),i.a.createElement("div",{className:"detail-panel"},i.a.createElement("div",{className:"detail-header"},i.a.createElement("div",{className:"detail-header-inner"},i.a.createElement("span",{className:"header-title"},"Engine"),i.a.createElement("button",{className:"close-button",type:"button",onClick:n}))),i.a.createElement("div",{className:"detail-body"},i.a.createElement("div",{className:"detail-body-inner"},i.a.createElement("div",{className:"detail-headline"},"".concat(a.line," ").concat(a.number)),i.a.createElement("div",{className:"detail-subhead"},"Sightings"),i.a.createElement("table",{className:"detail-table",cellPadding:"0",cellSpacing:"0"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Date"),i.a.createElement("th",null,"Time"),i.a.createElement("th",null,"Pos."),i.a.createElement("th",null,"Loc."))),i.a.createElement("tbody",null,a.engines.map(function(t){var n=l.find(function(e){return e._id===t.entryId}),r=n.engines.find(function(e){return e.line===a.line&&e.number===a.number});return i.a.createElement("tr",{key:I()},i.a.createElement("td",null,i.a.createElement("span",null,i.a.createElement("button",{className:"simple-text-button",type:"button",onClick:function(){return e.onDateClick(t.entryId)}},t.date))),i.a.createElement("td",null,i.a.createElement("span",null,n.time.replace(":00 "," "))),i.a.createElement("td",null,i.a.createElement("span",null,"".concat(r.order,"/").concat(n.engines.length))),i.a.createElement("td",null,i.a.createElement("span",null,r.location)))})))))))}}]),t}(a.Component),de=Object(c.b)(function(e){return{entries:e.entryData.items}},function(e){return Object(u.a)({dispatch:e},Object(s.b)({showDetail:d},e))})(me),he=function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"menu-nav-item"},"About the Project"),i.a.createElement("p",null,"The Milwaukee District North tracks sit just beyond the alley in my backyard. During off-peak hours, freight trains are cleared to run along this stretch of the Metra corridor. They rumble past my home office window at seemingly random intervals while I work and attempt to apply structure to this new phase of my career."),i.a.createElement("p",null,"This project also brought me up to speed with React/Redux and was developed using the MERN stack."))},be=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(y.a)(this,Object(N.a)(t).call(this,e))).state={date:"",direction:"north",engines:[{id:"engine-no-0",line:"",number:"",location:"",isValid:!1}],idIter:0,isEntryValid:!0,notes:"",time:""},n.handleDateChange=n.handleDateChange.bind(Object(j.a)(n)),n.handleTimeChange=n.handleTimeChange.bind(Object(j.a)(n)),n.handleDirectionChange=n.handleDirectionChange.bind(Object(j.a)(n)),n.handleNotesChange=n.handleNotesChange.bind(Object(j.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(j.a)(n)),n.handleCancel=n.handleCancel.bind(Object(j.a)(n)),n.displayForm=n.displayForm.bind(Object(j.a)(n)),n.addEngine=n.addEngine.bind(Object(j.a)(n)),n.removeEngine=n.removeEngine.bind(Object(j.a)(n)),n.updateEngines=n.updateEngines.bind(Object(j.a)(n)),n.reset=n.reset.bind(Object(j.a)(n)),n}return Object(O.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=new Date;this.setState({date:M(e),time:L(e)})}},{key:"handleDateChange",value:function(e){this.setState({date:e.target.value})}},{key:"handleTimeChange",value:function(e){this.setState({time:e.target.value})}},{key:"handleDirectionChange",value:function(e){this.setState({direction:e.target.value})}},{key:"handleNotesChange",value:function(e){this.setState({notes:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this.props.dispatch,n=this.state,a=n.date,i=n.direction,l=n.engines,r=n.notes,c=n.time,s=!0;e.preventDefault(),l.forEach(function(e){e.isValid||(s=!1)}),s&&(t(p({date:k(a),direction:i,engines:l.map(function(e,t){return{line:e.line,number:e.number,order:t+1,location:e.location}}),id:w(a,c),notes:r,time:D(c)})),this.reset()),this.setState({isEntryValid:s})}},{key:"handleCancel",value:function(e){e.preventDefault(),this.reset()}},{key:"reset",value:function(){var e=new Date;this.setState({date:M(e),direction:"north",idIter:0,isEntryValid:!0,engines:[{id:"engine-no-0",isValid:!1,line:"",location:"",number:""}],notes:"",time:L(e)})}},{key:"displayForm",value:function(){(0,this.props.setActiveMenuItem)("add-entry")}},{key:"addEngine",value:function(){var e=this.state,t=e.engines,n=e.idIter+1;t.push({id:"engine-no-".concat(n),line:"",number:"",location:"",isValid:!1}),this.setState({idIter:n}),this.setState({engines:t})}},{key:"removeEngine",value:function(e){var t=this.state.engines,n=t.findIndex(function(t){return t.id===e});t.splice(n,1),this.setState({engines:t})}},{key:"updateEngines",value:function(e,t,n,a,i){var l=this.state.engines.find(function(t){return t.id===e});null!==l&&(l.line=n,l.location=a,l.number=i,l.isValid=t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.isActive,a=t.trainLineList,l=this.state,r=l.date,c=l.direction,s=l.engines,o=l.isEntryValid,u=l.notes,m=l.time,d="hidden";return o||(d=""),i.a.createElement("div",null,i.a.createElement("button",{className:"menu-nav-item menu-nav-button",onClick:this.displayForm,type:"button"},"Add an Entry"),i.a.createElement("form",{className:"login-form app-form ".concat(n?"":"hidden"),onSubmit:this.handleSubmit},i.a.createElement("label",{className:"form-label form-label-date",htmlFor:"date"},i.a.createElement("span",null,"Date"),i.a.createElement("input",{className:"form-input",id:"date",name:"date",type:"date",value:r,onChange:this.handleDateChange})),i.a.createElement("div",{className:"flex-row"},i.a.createElement("label",{className:"form-label form-label-time",htmlFor:"time"},i.a.createElement("span",null,"Time"),i.a.createElement("input",{className:"form-input",id:"time",name:"time",type:"time",value:m,onChange:this.handleTimeChange})),i.a.createElement("label",{className:"form-label form-select-label form-label-direction",htmlFor:"direction"},i.a.createElement("span",null,"Direction"),i.a.createElement("select",{className:"form-select",id:"direction",name:"direction",value:c,onChange:this.handleDirectionChange},i.a.createElement("option",{value:"north"},"North"),i.a.createElement("option",{value:"south"},"South")))),s.map(function(t){return i.a.createElement(re,{id:t.id,key:t.id,line:t.line,location:t.location,number:t.number,removeEngine:e.removeEngine,trainLineList:a,updateEngines:e.updateEngines})}),i.a.createElement("button",{className:"text-button add-engine-button",type:"button",onClick:this.addEngine},"Add Another Engine"),i.a.createElement("label",{className:"form-label form-label-notes",htmlFor:"notes"},i.a.createElement("span",null,"Notes"),i.a.createElement("textarea",{className:"form-textarea",id:"notes",name:"notes",value:u,onChange:this.handleNotesChange})),i.a.createElement("div",{className:"form-action-buttons"},i.a.createElement("button",{className:"submit-button add-button",type:"submit"},"Add Entry"),i.a.createElement("button",{className:"cancel-button",type:"button",onClick:this.handleCancel})),i.a.createElement("div",{className:"form-error ".concat(d)},"There was an error adding the entry. Please try again.")))}}]),t}(a.Component),ve=Object(c.b)(function(e){return{trainLineList:e.trainLines.items}})(be),pe=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(y.a)(this,Object(N.a)(t).call(this,e))).state={lineName:"",lineShortName:"",lineColor:"",isEntryValid:!0},n.handleLineNameChange=n.handleLineNameChange.bind(Object(j.a)(n)),n.handleLineShortNameChange=n.handleLineShortNameChange.bind(Object(j.a)(n)),n.handleLineColorChange=n.handleLineColorChange.bind(Object(j.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(j.a)(n)),n.displayForm=n.displayForm.bind(Object(j.a)(n)),n}return Object(O.a)(t,e),Object(E.a)(t,[{key:"handleLineNameChange",value:function(e){this.setState({lineName:e.target.value})}},{key:"handleLineShortNameChange",value:function(e){this.setState({lineShortName:e.target.value})}},{key:"handleLineColorChange",value:function(e){this.setState({lineColor:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this.props.dispatch,n=this.state,a=n.lineName,i=n.lineShortName,l=n.lineColor,r=!0;e.preventDefault(),""===a&&(r=!1),r&&(t(function(e){var t=e.lineName,n=e.lineShortName,a=e.lineColor,i=e.id;return function(e){return e({type:"SUBMIT_TRAIN_LINE"}),fetch("/addTrainLine",{method:"POST",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify({lineName:t,lineShortName:n,lineColor:a,id:i})}).then(function(e){return e.json()}).then(function(t){return e(m(t))})}}({lineName:a,lineShortName:i,lineColor:l,id:a.toLowerCase().replace(/\s/,"-")})),this.reset()),this.setState({isEntryValid:r})}},{key:"handleCancel",value:function(e){e.preventDefault(),this.reset()}},{key:"reset",value:function(){this.setState({lineName:"",lineShortName:"",lineColor:""})}},{key:"displayForm",value:function(){(0,this.props.setActiveMenuItem)("add-line")}},{key:"render",value:function(){var e=this.props.isActive,t=this.state,n=t.lineName,a=t.lineShortName,l=t.lineColor,r="hidden";return t.isEntryValid||(r=""),i.a.createElement("div",null,i.a.createElement("button",{className:"menu-nav-item menu-nav-button",onClick:this.displayForm,type:"button"},"Add a Train Line"),i.a.createElement("form",{className:"login-form app-form ".concat(e?"":"hidden"),onSubmit:this.handleSubmit},i.a.createElement("label",{className:"form-label form-label-line-name",htmlFor:"lineName"},i.a.createElement("span",null,"Name"),i.a.createElement("input",{className:"form-input",id:"lineName",name:"lineName",type:"text",value:n,onChange:this.handleLineNameChange})),i.a.createElement("label",{className:"form-label form-label-line-short-name",htmlFor:"lineShortName"},i.a.createElement("span",null,"Short Name"),i.a.createElement("input",{className:"form-input",id:"lineShortName",name:"lineShortName",type:"text",value:a,onChange:this.handleLineShortNameChange})),i.a.createElement("label",{className:"form-label form-label-line-color",htmlFor:"lineColor"},i.a.createElement("span",null,"Color"),i.a.createElement("input",{className:"form-input",id:"lineColor",name:"lineColor",type:"text",value:l,onChange:this.handleLineColorChange})),i.a.createElement("div",{className:"form-action-buttons"},i.a.createElement("button",{className:"submit-button add-button",type:"submit"},"Add Line"),i.a.createElement("button",{className:"cancel-button",type:"button",onClick:this.handleCancel})),i.a.createElement("div",{className:"form-error ".concat(r)},"There was an error signing in. Please recheck.")))}}]),t}(a.Component),fe=Object(c.b)()(pe),ge=function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"menu-nav-item"},"Contact"),i.a.createElement("p",null,"jef.a.mayer(at)gmail.com",i.a.createElement("br",null),i.a.createElement("a",{className:"inline-link",href:"https://jefmayer.com"},"jefmayer.com")))},Ee=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(y.a)(this,Object(N.a)(t).call(this,e))).state={user:"",password:""},n.handleUserChange=n.handleUserChange.bind(Object(j.a)(n)),n.handlePasswordChange=n.handlePasswordChange.bind(Object(j.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(j.a)(n)),n.logout=n.logout.bind(Object(j.a)(n)),n.displayForm=n.displayForm.bind(Object(j.a)(n)),n}return Object(O.a)(t,e),Object(E.a)(t,[{key:"handleUserChange",value:function(e){this.setState({user:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this.props.dispatch,n=this.state,a=n.user,i=n.password;e.preventDefault(),t(function(e){var t=e.user,n=e.password;return function(e){return e({type:"REQUEST_ENTRIES"}),fetch("/login",{method:"POST",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify({user:t,password:n})}).then(function(e){return e.json()}).then(function(t){return e(function(e){return{type:"LOG_IN",data:e}}(t))})}}({user:a,password:i}))}},{key:"displayForm",value:function(){(0,this.props.setActiveMenuItem)("login")}},{key:"logout",value:function(){var e=this.props,t=e.dispatch;(0,e.setActiveMenuItem)(""),t({type:"LOG_OUT"})}},{key:"render",value:function(){var e=this.props,t=e.isActive,n=e.isLoggedIn,a=e.isLoginError,l=this.state,r=l.user,c=l.password,s="hidden";return a&&(s=""),n?i.a.createElement("button",{className:"menu-nav-item menu-nav-button",type:"button",onClick:this.logout},"Logout"):i.a.createElement("div",null,i.a.createElement("button",{className:"menu-nav-item menu-nav-button",onClick:this.displayForm,type:"button"},"Login"),i.a.createElement("form",{className:"login-form app-form ".concat(t?"":"hidden"),onSubmit:this.handleSubmit},i.a.createElement("label",{className:"form-label",htmlFor:"user"},i.a.createElement("span",null,"Name"),i.a.createElement("input",{className:"form-input",id:"user",name:"user",type:"text",value:r,onChange:this.handleUserChange})),i.a.createElement("label",{className:"form-label",htmlFor:"password"},i.a.createElement("span",null,"Password"),i.a.createElement("input",{className:"form-input",id:"password",name:"password",type:"password",value:c,onChange:this.handlePasswordChange})),i.a.createElement("input",{className:"submit-button",type:"submit",value:"Login"}),i.a.createElement("div",{className:"form-error ".concat(s)},"There was an error signing in. Please recheck.")))}}]),t}(a.Component),ye=Object(c.b)(function(e){var t=e.userStatus;return{isLoggedIn:t.isLoggedIn,isLoginError:t.isLoginError}})(Ee),Ne=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(y.a)(this,Object(N.a)(t).call(this,e))).state={activeMenuItem:""},n.divRef=i.a.createRef(),n.setActiveMenuItem=n.setActiveMenuItem.bind(Object(j.a)(n)),n}return Object(O.a)(t,e),Object(E.a)(t,[{key:"componentDidUpdate",value:function(){var e=this;if("closed"===this.props.menuDisplayClass)var t=setTimeout(function(){e.divRef.current.setAttribute("style","position:absolute;"),clearTimeout(t)},150);else this.divRef.current.setAttribute("style","position:fixed;")}},{key:"setActiveMenuItem",value:function(e){this.setState({activeMenuItem:e})}},{key:"render",value:function(){var e=this.state.activeMenuItem,t=this.props,n=t.isLoggedIn,a=t.menuDisplayClass,l=t.onMenuClick;return i.a.createElement("div",{className:"menu-container ".concat(a),ref:this.divRef},i.a.createElement("button",{className:"menu-button",onClick:l,type:"button"},i.a.createElement("span",{className:"menu-icon"},i.a.createElement("span",{className:"menu-bar"}),i.a.createElement("span",{className:"menu-bar"}),i.a.createElement("span",{className:"menu-bar"}))),i.a.createElement("div",{className:"menu-nav"},i.a.createElement("div",{className:"menu-nav-inner"},i.a.createElement(he,null),i.a.createElement(ge,null),n&&i.a.createElement("div",null,i.a.createElement(ve,{setActiveMenuItem:this.setActiveMenuItem,isActive:"add-entry"===e}),i.a.createElement(fe,{setActiveMenuItem:this.setActiveMenuItem,isActive:"add-line"===e})),i.a.createElement(ye,{setActiveMenuItem:this.setActiveMenuItem,isActive:"login"===e}))))}}]),t}(a.Component),Oe=Object(c.b)(function(e){return{isLoggedIn:e.userStatus.isLoggedIn}})(Ne),je=n(22),Ce=n.n(je),Se=(n(34),function(e){function t(){return Object(g.a)(this,t),Object(y.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e(function(e){return e({type:"REQUEST_ENTRIES"}),fetch("/getEntries").then(function(e){return e.json()}).then(function(t){return e(function(e){return{type:"RECEIVE_ENTRIES",data:e}}(t))})}),e(function(e){return e({type:"REQUEST_LINES"}),fetch("/getLines").then(function(e){return e.json()}).then(function(t){return e(function(e){return{type:"RECEIVE_LINES",data:e}}(t))})})}},{key:"render",value:function(){var e=this.props,t=e.detailContentType,n=e.detailData,a=e.dispatch,l=e.entries,r=e.isDetailOpen,c=e.isMenuOpen;function s(){a(h())}return i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"app-header"},i.a.createElement("div",{className:"logo-wrapper"},i.a.createElement("img",{src:Ce.a,className:"logo-graphic",alt:"Trainspotted Logo"}),i.a.createElement("div",{className:"logo-type"},"Trainspotted")),i.a.createElement(Oe,{menuDisplayClass:c?"open":"closed",onMenuClick:function(){a(c?v():b())}})),i.a.createElement($,null),i.a.createElement(le,{entries:l}),r&&"entry"===t&&i.a.createElement(ue,{onDetailClose:s,data:n}),r&&"resighting"===t&&i.a.createElement(de,{onDetailClose:s,data:n}))}}]),t}(a.Component)),ke=Object(c.b)(function(e){var t=e.entryData,n=e.detail,a=e.menu,i=t.items,l=n.contentType;return{detailData:n.data,detailContentType:l,entries:i,isDetailOpen:n.isOpen,isMenuOpen:a.isOpen}})(Se),De=[o.a];var Me=Object(s.d)(f,s.a.apply(void 0,De));r.a.render(i.a.createElement(c.a,{store:Me},i.a.createElement(ke,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.38a9c7a4.chunk.js.map