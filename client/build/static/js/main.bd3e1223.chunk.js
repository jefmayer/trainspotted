(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a.p+"static/media/trainspotted-logo.f965f559.svg"},22:function(e,t,a){e.exports=a(33)},32:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(12),s=a.n(l),i=a(6),c=a(9),o=a(19),u=(a(31),a(8)),m=function(e){return{type:"SHOW_DETAIL",data:e}},d=function(){return{type:"HIDE_DETAIL"}},p=function(){return{type:"SHOW_MENU"}},E=function(){return{type:"HIDE_MENU"}},h=Object(c.c)({entryData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,items:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_ENTRIES":return Object(u.a)({},e,{isFetching:!0});case"RECEIVE_ENTRIES":return Object(u.a)({},e,{isFetching:!1,items:t.data});default:return e}},entryDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isOpen:!1,id:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_DETAIL":return Object(u.a)({},e,{isOpen:!0,id:t.data});case"HIDE_DETAIL":return Object(u.a)({},e,{isOpen:!1,id:t.data});default:return e}},menu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isOpen:!1};switch((arguments.length>1?arguments[1]:void 0).type){case"SHOW_MENU":return Object(u.a)({},e,{isOpen:!0});case"HIDE_MENU":return Object(u.a)({},e,{isOpen:!1});default:return e}},userStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoggedIn:!1,isLoginError:!1,response:[{success:"error"}]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN":return"success"===t.data[0].success?Object(u.a)({},e,{isLoggedIn:!0,isLoginError:!1,response:t.data}):Object(u.a)({},e,{isLoggedIn:!1,isLoginError:!0,response:t.data});case"LOG_OUT":return Object(u.a)({},e,{isLoggedIn:!1});default:return e}}}),f=a(1),b=a(2),v=a(5),g=a(3),y=a(4),O=a(21),N=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).divRef=r.a.createRef(),a}return Object(y.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.entry,t=e.time.split(":");-1!==e.time.indexOf("PM")&&-1===e.time.indexOf("12:")&&(t[0]=parseInt(t[0],10)+12),-1!==e.time.indexOf("AM")&&-1!==e.time.indexOf("12:")&&(t[0]=parseInt(t[0],10)-12);var a=((3600*t[0]+60*parseInt(t[1],10))/864).toFixed(2);this.divRef.current.setAttribute("style","left:".concat(a,"%;"))}},{key:"render",value:function(){var e=this.props,t=e.entry,a=e.dispatch;function n(){a(m(t._id))}return r.a.createElement("button",{className:"engine-manifest",ref:this.divRef,type:"button",onClick:n,onKeyDown:n},t.engines.map(function(e){var t={backgroundColor:e.color};return r.a.createElement("span",{className:"engine-number",style:t,key:e.number},e.number)}),r.a.createElement("span",{className:"engine-details-button"},"..."))}}]),t}(n.Component),j=Object(i.b)(function(e){return Object(c.b)({showDetail:m},e)})(N),C=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).divRef=r.a.createRef(),a.entryHeight=0,a}return Object(y.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.divRef.current.setAttribute("style","height:".concat(this.entryHeight,"px;"))}},{key:"render",value:function(){var e=this,t=this.props.date,a=this.props.entries;return r.a.createElement("div",{className:"entries-for-date",ref:this.divRef},a.map(function(a){return a.date===t?(e.entryHeight<20*a.engines.length&&(e.entryHeight=20*(a.engines.length+1)),r.a.createElement(j,{key:a._id,entry:a})):""}))}}]),t}(n.Component),k=["January","February","March","April","May","June","July","August","September","October","November","December"],w=function(e){var t=e.entries,a=Object(O.a)(new Set(t.map(function(e){return e.date})));return r.a.createElement("div",{className:"train-chart"},r.a.createElement("div",{className:"x-axis-header clearfix"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("span",null,"12 AM")),r.a.createElement("li",null,r.a.createElement("span",null,"2 AM")),r.a.createElement("li",null,r.a.createElement("span",null,"4 AM")),r.a.createElement("li",null,r.a.createElement("span",null,"6 AM")),r.a.createElement("li",null,r.a.createElement("span",null,"8 AM")),r.a.createElement("li",null,r.a.createElement("span",null,"10 AM")),r.a.createElement("li",null,r.a.createElement("span",null,"12 PM")),r.a.createElement("li",null,r.a.createElement("span",null,"2 PM")),r.a.createElement("li",null,r.a.createElement("span",null,"4 PM")),r.a.createElement("li",null,r.a.createElement("span",null,"6 PM")),r.a.createElement("li",null,r.a.createElement("span",null,"8 PM")),r.a.createElement("li",null,r.a.createElement("span",null,"10 PM")))),r.a.createElement("div",{className:"time-table"},r.a.createElement("div",{className:"month-bar"}),a.map(function(e){return r.a.createElement("div",{className:"date-line",key:e},r.a.createElement("div",{className:"month-display"},r.a.createElement("span",null,"".concat(k[e.split("/")[0]-1]," ").concat(e.split("/")[2]))),r.a.createElement("div",{className:"date-display"},r.a.createElement("span",null,e.split("/")[1])),r.a.createElement(C,{date:e,entries:t}))})))};var D=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).state={loadedClass:""},a}return Object(y.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=setTimeout(function(){e.setState({loadedClass:"detail-loaded"}),clearInterval(t)},250)}},{key:"render",value:function(){var e=this.props,t=e.onDetailClose,a=e.data,n=this.state.loadedClass;return r.a.createElement("div",{className:"detail-overlay ".concat(n)},r.a.createElement("div",{className:"detail-bg",role:"none",onClick:t}),r.a.createElement("div",{className:"detail-panel"},r.a.createElement("div",{className:"detail-header"},r.a.createElement("div",{className:"detail-header-inner"},r.a.createElement("span",{className:"entry-number"},"Entry No.\xa0",a.number),r.a.createElement("button",{className:"close-button",type:"button",onClick:t}))),r.a.createElement("div",{className:"detail-body"},r.a.createElement("div",{className:"detail-body-inner"},r.a.createElement("div",{className:"detail-headline"},"".concat(a.engines.length," engine train observed on ").concat(function(e,t){var a=e.split("/");return"".concat(t[a[0]-1]," ").concat(a[1],", ").concat(a[2])}(a.date,k)," at ").concat(function(e){var t=e.split(":"),a="a.m.";return-1!==e.indexOf("PM")&&(a="p.m."),"".concat(t[0],":").concat(t[1]," ").concat(a)}(a.time)," heading ").concat(a.direction,".")),r.a.createElement("div",{className:"detail-subhead"},"Engines"),r.a.createElement("table",{className:"detail-table",cellPadding:"0",cellSpacing:"0"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Ord."),r.a.createElement("th",null,"Line"),r.a.createElement("th",null,"No."),r.a.createElement("th",null,"Pos."),r.a.createElement("th",null,"Sightings"))),r.a.createElement("tbody",null,a.engines.map(function(e){var t={backgroundColor:e.color};return r.a.createElement("tr",{key:e.number},r.a.createElement("td",null,r.a.createElement("span",{className:"engine-color-indicator",style:t},e.order)),r.a.createElement("td",null,r.a.createElement("span",null,e.line)),r.a.createElement("td",null,r.a.createElement("span",null,e.number)),r.a.createElement("td",null,r.a.createElement("span",null,e.location)),r.a.createElement("td",null,r.a.createElement("span",null,"\xa0")))}))),r.a.createElement("div",{className:"detail-subhead"},"Notes")))))}}]),t}(n.Component),I=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"menu-nav-item"},"About the Project"),r.a.createElement("p",null,"Trainspotted is my home office, set up in front of a backyard window looking out at the Milwaukee District North tracks across the alley. During off-peak hours, freight trains are cleared to run along the Metra corridor. Much like my work situation, the trains don\u2019t adhere to any set schedule. This is an exercise in applying structure to the chaos surrounding this new phase of my life."),r.a.createElement("p",null,"This project also brought me up to speed with React/Redux and was developed using the full MERN stack."))},L=function(){return r.a.createElement("button",{className:"menu-nav-item",type:"button"},"Add an Entry")},M=function(){return r.a.createElement("button",{className:"menu-nav-item",type:"button"},"Add a Train Line")},S=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"menu-nav-item"},"Contact"),r.a.createElement("p",null,"jef.a.mayer(at)gmail.com",r.a.createElement("br",null),"jefmayer.com"))},R=a(7),T=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).state={user:"",password:"",formDisplayClass:"hidden"},a.handleUserChange=a.handleUserChange.bind(Object(R.a)(a)),a.handlePasswordChange=a.handlePasswordChange.bind(Object(R.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(R.a)(a)),a.logout=a.logout.bind(Object(R.a)(a)),a.displayLoginForm=a.displayLoginForm.bind(Object(R.a)(a)),a}return Object(y.a)(t,e),Object(b.a)(t,[{key:"handleUserChange",value:function(e){console.log(e),this.setState({user:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this.props.dispatch,a=this.state,n=a.user,r=a.password;e.preventDefault(),t(function(e){var t=e.user,a=e.password;return function(e){return e({type:"REQUEST_ENTRIES"}),fetch("/login",{method:"POST",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify({user:t,password:a})}).then(function(e){return e.json()}).then(function(t){return e(function(e){return{type:"LOG_IN",data:e}}(t))})}}({user:n,password:r}))}},{key:"displayLoginForm",value:function(){this.setState({formDisplayClass:""})}},{key:"logout",value:function(){var e=this.props.dispatch;this.setState({formDisplayClass:"hidden"}),e({type:"LOG_OUT"})}},{key:"render",value:function(){var e=this.props,t=e.isLoggedIn,a=e.isLoginError,n=this.state,l=n.user,s=n.password,i=n.formDisplayClass,c="hidden";return a&&(c=""),t?r.a.createElement("button",{className:"menu-nav-item",type:"button",onClick:this.logout},"Logout"):r.a.createElement("div",null,r.a.createElement("button",{className:"menu-nav-item",onClick:this.displayLoginForm,type:"button"},"Login"),r.a.createElement("form",{className:"login-form app-form ".concat(i),onSubmit:this.handleSubmit},r.a.createElement("label",{className:"form-label",htmlFor:"user"},r.a.createElement("span",null,"Name"),r.a.createElement("input",{className:"form-input",id:"user",name:"user",type:"text",value:l,onChange:this.handleUserChange})),r.a.createElement("label",{className:"form-label",htmlFor:"password"},r.a.createElement("span",null,"Password"),r.a.createElement("input",{className:"form-input",id:"password",name:"password",type:"password",value:s,onChange:this.handlePasswordChange})),r.a.createElement("input",{className:"submit-button",type:"submit",value:"Login"}),r.a.createElement("div",{className:"form-error ".concat(c)},"There was an error signing in. Please recheck.")))}}]),t}(n.Component),A=Object(i.b)(function(e){var t=e.userStatus;return{isLoggedIn:t.isLoggedIn,isLoginError:t.isLoginError}})(T),_=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).divRef=r.a.createRef(),a}return Object(y.a)(t,e),Object(b.a)(t,[{key:"componentDidUpdate",value:function(){var e=this;if("closed"===this.props.menuDisplayClass)var t=setTimeout(function(){e.divRef.current.setAttribute("style","position:absolute;"),clearTimeout(t)},150);else this.divRef.current.setAttribute("style","position:fixed;")}},{key:"render",value:function(){var e=this.props,t=e.isLoggedIn,a=e.menuDisplayClass,n=e.onMenuClick;return r.a.createElement("div",{className:"menu-container ".concat(a),ref:this.divRef},r.a.createElement("button",{className:"menu-button",onClick:n,type:"button"},r.a.createElement("span",{className:"menu-icon"},r.a.createElement("span",{className:"menu-bar"}),r.a.createElement("span",{className:"menu-bar"}),r.a.createElement("span",{className:"menu-bar"}))),r.a.createElement("div",{className:"menu-nav"},r.a.createElement("div",{className:"menu-nav-inner"},r.a.createElement(I,null),r.a.createElement(S,null),t&&r.a.createElement("div",null,r.a.createElement(L,null),r.a.createElement(M,null)),r.a.createElement(A,null))))}}]),t}(n.Component),P=Object(i.b)(function(e){return{isLoggedIn:e.userStatus.isLoggedIn}})(_),x=a(20),U=a.n(x),H=(a(32),function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(function(e){return e({type:"REQUEST_ENTRIES"}),fetch("/getEntries").then(function(e){return e.json()}).then(function(t){return e(function(e){return{type:"RECEIVE_ENTRIES",data:e}}(t))})})}},{key:"render",value:function(){var e,t=this.props,a=t.detailId,n=t.dispatch,l=t.entries,s=t.isDetailOpen,i=t.isMenuOpen;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"app-header"},r.a.createElement("div",{className:"logo-wrapper"},r.a.createElement("img",{src:U.a,className:"logo-graphic",alt:"Trainspotted Logo"}),r.a.createElement("div",{className:"logo-type"},"Trainspotted")),r.a.createElement(P,{menuDisplayClass:i?"open":"closed",onMenuClick:function(){n(i?E():p())}})),r.a.createElement(w,{entries:l}),s&&r.a.createElement(D,{onDetailClose:function(){n(d())},data:(e=a,console.log(e),l.find(function(t){return t._id===e}))}))}}]),t}(n.Component)),F=Object(i.b)(function(e){var t=e.entryData,a=e.entryDetail,n=e.menu,r=t.items;return{detailId:a.id,entries:r,isDetailOpen:a.isOpen,isMenuOpen:n.isOpen}})(H),J=[o.a];var G=Object(c.d)(h,c.a.apply(void 0,J));console.log(G.getState()),s.a.render(r.a.createElement(i.a,{store:G},r.a.createElement(F,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.bd3e1223.chunk.js.map