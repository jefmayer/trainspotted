(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a.p+"static/media/trainspotted-logo.f965f559.svg"},22:function(e,t,a){e.exports=a(33)},32:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(12),r=a.n(l),s=a(7),c=a(9),o=a(19),u=(a(31),a(8)),m=function(e){return{type:"ENTRY_ADDED",data:e}},d=function(e){return{type:"SHOW_DETAIL",data:e}},h=function(){return{type:"HIDE_DETAIL"}},b=function(){return{type:"SHOW_MENU"}},p=function(){return{type:"HIDE_MENU"}},v=function(e){var t=e.date,a=e.direction,n=e.engines,i=e.id,l=e.time,r=e.notes;return function(e){return e({type:"SUBMIT_ENTRY"}),fetch("/addEntry",{method:"POST",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify({date:t,time:l,direction:a,engines:n,id:i,notes:r})}).then(function(e){return e.json()}).then(function(t){return e(m(t))})}},E=Object(c.c)({entryData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,items:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_ENTRIES":case"SUBMIT_ENTRY":return Object(u.a)({},e,{isFetching:!0});case"RECEIVE_ENTRIES":case"ENTRY_ADDED":return Object(u.a)({},e,{isFetching:!1,items:t.data});default:return e}},entryDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isOpen:!1,id:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_DETAIL":return Object(u.a)({},e,{isOpen:!0,id:t.data});case"HIDE_DETAIL":return Object(u.a)({},e,{isOpen:!1,id:t.data});default:return e}},menu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isOpen:!1};switch((arguments.length>1?arguments[1]:void 0).type){case"SHOW_MENU":return Object(u.a)({},e,{isOpen:!0});case"HIDE_MENU":return Object(u.a)({},e,{isOpen:!1});default:return e}},trainLines:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,items:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_LINES":case"SUBMIT_TRAIN_LINE":return Object(u.a)({},e,{isFetching:!0});case"RECEIVE_LINES":case"TRAIN_LINE_ADDED":return Object(u.a)({},e,{isFetching:!1,items:t.data});default:return e}},userStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoggedIn:!1,isLoginError:!1,response:[{success:"error"}]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN":return"success"===t.data[0].success?Object(u.a)({},e,{isLoggedIn:!0,isLoginError:!1,response:t.data}):Object(u.a)({},e,{isLoggedIn:!1,isLoginError:!0,response:t.data});case"LOG_OUT":return Object(u.a)({},e,{isLoggedIn:!1});default:return e}}}),f=a(2),g=a(3),y=a(6),N=a(4),O=a(5),C=a(1),j=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(y.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(i)))).onFilterClick=function(){var e=a.props,t=e.label;(0,e.onFilterClick)(t)},a}return Object(O.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isActive,a=e.label;return i.a.createElement("li",{key:a},i.a.createElement("button",{className:t?"active":"",onClick:this.onFilterClick,type:"button"},i.a.createElement("span",null,a)))}}]),t}(n.Component),S=function(e){function t(e){var a;return Object(f.a)(this,t),a=Object(y.a)(this,Object(N.a)(t).call(this,e)),console.log("EngineValues"),a}return Object(O.a)(t,e),Object(g.a)(t,[{key:"getEngineCountByLine",value:function(e){var t=this.props.entries,a=0;return t.forEach(function(t){a+=t.engines.filter(function(t){return t.line===e}).length}),a}},{key:"render",value:function(){var e=this,t=this.props,a=t.dataSet,n=t.trainLineList;return i.a.createElement("div",{className:"data-table"},i.a.createElement("div",{className:"y-axis"},n.map(function(t){var a={backgroundColor:t.color,transform:"scaleX(".concat(e.getEngineCountByLine(t.name)/200,")")};return i.a.createElement("div",{className:"y-axis-row",key:t.id},i.a.createElement("div",{className:"row-label"},t.name),i.a.createElement("div",{className:"row-axis"}),i.a.createElement("div",{className:"value-display",style:a}))})),i.a.createElement("div",{className:"x-axis"},i.a.createElement("div",{className:"data-set"},i.a.createElement("ul",{className:"data-set-values"},a.map(function(e){return i.a.createElement("li",{key:"".concat(e,"-").concat(Math.round(1e3*Math.random()))},e)})))))}}]),t}(n.Component);S.defaultProps={dataSet:["0","20","40","60","80","100","120","140","160","180","200"]};var k=Object(s.b)(function(e){var t=e.entryData,a=e.trainLines;return{entries:t.items,trainLineList:a.items}})(S),L=function(e){function t(e){var a;return Object(f.a)(this,t),a=Object(y.a)(this,Object(N.a)(t).call(this,e)),console.log("values"),a}return Object(O.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props,t=e.dataSet,a=e.trainLineList;return i.a.createElement("div",{className:"data-table"},i.a.createElement("div",{className:"y-axis"},a.map(function(e){return i.a.createElement("div",{className:"y-axis-row",key:e.id},i.a.createElement("div",{className:"row-label"},e.name),i.a.createElement("div",{className:"row-axis"}))})),i.a.createElement("div",{className:"x-axis"},i.a.createElement("div",{className:"data-set"},i.a.createElement("ul",{className:"data-set-values"},t.map(function(e){return i.a.createElement("li",{key:"".concat(e,"-").concat(Math.round(1e3*Math.random()))},e)})))))}}]),t}(n.Component);L.defaultProps={dataSet:["3/19","4/19","5/19","6/19","7/19","8/19","9/19","10/19","11/19"]};var M=Object(s.b)(function(e){return{trainLineList:e.trainLines.items}})(L),D=function(e){function t(e){var a;return Object(f.a)(this,t),a=Object(y.a)(this,Object(N.a)(t).call(this,e)),console.log("values"),a}return Object(O.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props,t=e.dataSet,a=e.trainLineList;return i.a.createElement("div",{className:"data-table"},i.a.createElement("div",{className:"y-axis"},a.map(function(e){return i.a.createElement("div",{className:"y-axis-row",key:e.id},i.a.createElement("div",{className:"row-label"},e.name),i.a.createElement("div",{className:"row-axis"}))})),i.a.createElement("div",{className:"x-axis"},i.a.createElement("div",{className:"data-set"},i.a.createElement("ul",{className:"data-set-values"},t.map(function(e){return i.a.createElement("li",{key:"".concat(e,"-").concat(Math.round(1e3*Math.random()))},e)})))))}}]),t}(n.Component);D.defaultProps={dataSet:["12 AM","2 AM","4AM","6 AM","8 AM"," 10 AM","12 PM","2 PM","4 PM","6 PM","8 PM","10 PM"]};var I=Object(s.b)(function(e){return{trainLineList:e.trainLines.items}})(D),A=function(e){function t(e){var a;return Object(f.a)(this,t),a=Object(y.a)(this,Object(N.a)(t).call(this,e)),console.log("values"),a}return Object(O.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props,t=e.dataSet,a=e.trainLineList;return i.a.createElement("div",{className:"data-table"},i.a.createElement("div",{className:"y-axis"},a.map(function(e){return i.a.createElement("div",{className:"y-axis-row",key:e.id},i.a.createElement("div",{className:"row-label"},e.name),i.a.createElement("div",{className:"row-axis"}))})),i.a.createElement("div",{className:"x-axis"},i.a.createElement("div",{className:"data-set"},i.a.createElement("ul",{className:"data-set-values"},t.map(function(e){return i.a.createElement("li",{key:"".concat(e,"-").concat(Math.round(1e3*Math.random()))},e)})))))}}]),t}(n.Component);A.defaultProps={dataSet:["S","M","T","W","T","F","S"]};var w=Object(s.b)(function(e){return{trainLineList:e.trainLines.items}})(A),T=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(N.a)(t).call(this,e))).state={activeSet:{label:"",values:[]}},a.handleDataSetChange=a.handleDataSetChange.bind(Object(C.a)(a)),a}return Object(O.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.dataSets;this.setState({activeSet:e[0]})}},{key:"handleDataSetChange",value:function(e){var t=this.props.dataSets.find(function(t){return t.label===e});this.setState({activeSet:t})}},{key:"render",value:function(){var e=this,t=this.props.dataSets,a=this.state.activeSet;return i.a.createElement("div",{className:"at-a-glance"},i.a.createElement("div",{className:"page-heading-divider"},i.a.createElement("h2",{className:"heading-lg"},"At A Glance")),i.a.createElement("div",{className:"aggregate-data-visualization-module"},i.a.createElement("div",{className:"module-inner"},i.a.createElement("div",{className:"data-filters"},i.a.createElement("ul",{className:"data-filters-inner"},t.map(function(t){return i.a.createElement(j,{isActive:t.label===a.label,key:t.label,label:t.label,onFilterClick:e.handleDataSetChange})}))),i.a.createElement("div",{className:"data-visualization"},"Engines"===a.label&&i.a.createElement(k,null),"Resightings"===a.label&&i.a.createElement(M,null),"Time"===a.label&&i.a.createElement(I,null),"Weekday"===a.label&&i.a.createElement(w,null)))))}}]),t}(n.Component);T.defaultProps={dataSets:[{label:"Engines"},{label:"Time"},{label:"Weekday"},{label:"Resightings"}]};var x=T,F=a(21),R=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(N.a)(t).call(this,e))).divRef=i.a.createRef(),a}return Object(O.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.entry,t=e.time.split(":");-1!==e.time.indexOf("PM")&&-1===e.time.indexOf("12:")&&(t[0]=parseInt(t[0],10)+12),-1!==e.time.indexOf("AM")&&-1!==e.time.indexOf("12:")&&(t[0]=parseInt(t[0],10)-12);var a=((3600*t[0]+60*parseInt(t[1],10))/864).toFixed(2);this.divRef.current.setAttribute("style","left:".concat(a,"%;"))}},{key:"render",value:function(){var e=this.props,t=e.entry,a=e.dispatch;function n(){a(d(t._id))}return i.a.createElement("button",{className:"engine-manifest",ref:this.divRef,type:"button",onClick:n,onKeyDown:n},t.engines.map(function(e){var t={backgroundColor:e.color};return i.a.createElement("span",{className:"engine-number",style:t,key:e.number},e.number)}),i.a.createElement("span",{className:"engine-details-button"},"..."))}}]),t}(n.Component),P=Object(s.b)(function(e){return Object(c.b)({showDetail:d},e)})(R),_=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(N.a)(t).call(this,e))).divRef=i.a.createRef(),a.entryHeight=0,a}return Object(O.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.divRef.current.setAttribute("style","height:".concat(this.entryHeight,"px;"))}},{key:"render",value:function(){var e=this,t=this.props.date,a=this.props.entries;return i.a.createElement("div",{className:"entries-for-date",ref:this.divRef},a.map(function(a){return a.date===t?(e.entryHeight<20*a.engines.length&&(e.entryHeight=20*(a.engines.length+1)),i.a.createElement(P,{key:a._id,entry:a})):""}))}}]),t}(n.Component),V=["January","February","March","April","May","June","July","August","September","October","November","December"],U=function(e){var t=e.entries,a=Object(F.a)(new Set(t.map(function(e){return e.date}))),n=-1,l=!1;return i.a.createElement("div",null,i.a.createElement("div",{className:"page-heading-divider"},i.a.createElement("h2",{className:"heading-lg"},"Sightings")),i.a.createElement("div",{className:"train-chart"},i.a.createElement("div",{className:"x-axis-header clearfix"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("span",null,"12 AM")),i.a.createElement("li",null,i.a.createElement("span",null,"2 AM")),i.a.createElement("li",null,i.a.createElement("span",null,"4 AM")),i.a.createElement("li",null,i.a.createElement("span",null,"6 AM")),i.a.createElement("li",null,i.a.createElement("span",null,"8 AM")),i.a.createElement("li",null,i.a.createElement("span",null,"10 AM")),i.a.createElement("li",null,i.a.createElement("span",null,"12 PM")),i.a.createElement("li",null,i.a.createElement("span",null,"2 PM")),i.a.createElement("li",null,i.a.createElement("span",null,"4 PM")),i.a.createElement("li",null,i.a.createElement("span",null,"6 PM")),i.a.createElement("li",null,i.a.createElement("span",null,"8 PM")),i.a.createElement("li",null,i.a.createElement("span",null,"10 PM")))),i.a.createElement("div",{className:"time-table"},i.a.createElement("div",{className:"month-bar"}),a.map(function(e){return n!==e.split("/")[0]?(n=e.split("/")[0],l=!0):l=!1,i.a.createElement("div",{className:"date-line",key:e},l&&i.a.createElement("div",{className:"month-display"},i.a.createElement("span",null,"".concat(V[e.split("/")[0]-1]," ").concat(e.split("/")[2]))),i.a.createElement("div",{className:"date-display"},i.a.createElement("span",null,e.split("/")[1])),i.a.createElement(_,{date:e,entries:t}))}))))},H=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(N.a)(t).call(this,e))).state={line:"",location:"",number:""},a.handleLineChange=a.handleLineChange.bind(Object(C.a)(a)),a.handleNumberChange=a.handleNumberChange.bind(Object(C.a)(a)),a.handleLocationChange=a.handleLocationChange.bind(Object(C.a)(a)),a.isEngineValid=a.isEngineValid.bind(Object(C.a)(a)),a.handleRemove=a.handleRemove.bind(Object(C.a)(a)),a}return Object(O.a)(t,e),Object(g.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.line,a=e.location,n=e.number;this.setState({line:t,location:a,number:n})}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.id,a=e.updateEngines,n=this.state,i=n.line,l=n.location,r=n.number;a(t,this.isEngineValid(),i,l,r)}},{key:"handleLineChange",value:function(e){this.setState({line:e.target.value})}},{key:"handleNumberChange",value:function(e){this.setState({number:e.target.value})}},{key:"handleLocationChange",value:function(e){this.setState({location:e.target.value})}},{key:"handleRemove",value:function(){var e=this.props,t=e.id;(0,e.removeEngine)(t)}},{key:"isEngineValid",value:function(){var e=this.state,t=e.line,a=e.location,n=e.number;return""!==t&&""!==a&&""!==n}},{key:"render",value:function(){var e=this.props.trainLineList,t=this.state,a=t.line,n=t.location,l=t.number;return i.a.createElement("div",{className:"flex-row add-engine-row"},i.a.createElement("label",{className:"form-label form-select-label form-label-line",htmlFor:"line"},i.a.createElement("span",null,"Line"),i.a.createElement("select",{className:"form-select",id:"line",name:"line",value:a,onChange:this.handleLineChange},i.a.createElement("option",{value:""},"Select"),e.map(function(e){return i.a.createElement("option",{value:e.name,key:e.id},e.short)}))),i.a.createElement("label",{className:"form-label form-label-number",htmlFor:"number"},i.a.createElement("span",null,"Number"),i.a.createElement("input",{className:"form-input",id:"number",name:"number",type:"number",value:l,onChange:this.handleNumberChange})),i.a.createElement("label",{className:"form-label form-select-label form-label-location",htmlFor:"location"},i.a.createElement("span",null,"Location"),i.a.createElement("select",{className:"form-select",id:"location",name:"location",value:n,onChange:this.handleLocationChange},i.a.createElement("option",{value:""},"Select"),i.a.createElement("option",{value:"front"},"Front"),i.a.createElement("option",{value:"middle"},"Middle"),i.a.createElement("option",{value:"end"},"End"))),i.a.createElement("button",{className:"remove-button",type:"button",onClick:this.handleRemove}))}}]),t}(n.Component);function J(e){var t=e.split("-");return"".concat(t[1],"/").concat(t[2],"/").concat(t[0])}function W(e){var t=e.split(":"),a=parseInt(t[0],10),n="AM";return a>12?(a-=12,n="PM"):12===a?n="PM":0===a&&(a=12),"".concat(a,":").concat(t[1],":00 ").concat(n)}function B(e){var t=e.getDate().toString();1===t.length&&(t="0".concat(t));var a=(e.getMonth()+1).toString();return 1===a.length&&(a="0".concat(a)),"".concat(e.getFullYear(),"-").concat(a,"-").concat(t)}function G(e){var t=e.getHours().toString();1===t.length&&(t="0".concat(t));var a=e.getMinutes().toString();return 1===a.length&&(a="0".concat(a)),"".concat(t,":").concat(a)}function Q(e,t){var a=e.split("-"),n=t.split(":");return"".concat(a[0]).concat(a[1]).concat(a[2]).concat(n[0]).concat(n[1])}var Y=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(N.a)(t).call(this,e))).state={date:"",direction:"north",engines:[{id:"engine-no-0",line:"",number:"",location:"",isValid:!1}],idIter:0,isActive:!1,isEntryValid:!0,notes:"",time:""},a.handleDateChange=a.handleDateChange.bind(Object(C.a)(a)),a.handleTimeChange=a.handleTimeChange.bind(Object(C.a)(a)),a.handleDirectionChange=a.handleDirectionChange.bind(Object(C.a)(a)),a.handleNotesChange=a.handleNotesChange.bind(Object(C.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(C.a)(a)),a.handleCancel=a.handleCancel.bind(Object(C.a)(a)),a.displayForm=a.displayForm.bind(Object(C.a)(a)),a.addEngine=a.addEngine.bind(Object(C.a)(a)),a.removeEngine=a.removeEngine.bind(Object(C.a)(a)),a.updateEngines=a.updateEngines.bind(Object(C.a)(a)),a.reset=a.reset.bind(Object(C.a)(a)),a}return Object(O.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=new Date;this.setState({date:B(e),time:G(e)})}},{key:"handleDateChange",value:function(e){this.setState({date:e.target.value})}},{key:"handleTimeChange",value:function(e){this.setState({time:e.target.value})}},{key:"handleDirectionChange",value:function(e){this.setState({direction:e.target.value})}},{key:"handleNotesChange",value:function(e){this.setState({notes:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this.props.dispatch,a=this.state,n=a.date,i=a.direction,l=a.engines,r=a.notes,s=a.time,c=!0;e.preventDefault(),l.forEach(function(e){e.isValid||(c=!1)}),c&&(t(v({date:J(n),direction:i,engines:l.map(function(e,t){return{line:e.line,number:e.number,order:t+1,location:e.location}}),id:Q(n,s),notes:r,time:W(s)})),this.reset()),this.setState({isEntryValid:c})}},{key:"handleCancel",value:function(e){e.preventDefault(),this.reset()}},{key:"reset",value:function(){var e=new Date;this.setState({date:B(e),direction:"north",idIter:0,isEntryValid:!0,engines:[{id:"engine-no-0",isValid:!1,line:"",location:"",number:"",notes:""}],time:G(e)})}},{key:"displayForm",value:function(){this.setState({isActive:!0})}},{key:"addEngine",value:function(){var e=this.state,t=e.engines,a=e.idIter+1;t.push({id:"engine-no-".concat(a),line:"",number:"",location:"",isValid:!1}),this.setState({idIter:a}),this.setState({engines:t})}},{key:"removeEngine",value:function(e){var t=this.state.engines,a=t.findIndex(function(t){return t.id===e});t.splice(a,1),this.setState({engines:t})}},{key:"updateEngines",value:function(e,t,a,n,i){var l=this.state.engines.find(function(t){return t.id===e});null!==l&&(l.line=a,l.location=n,l.number=i,l.isValid=t)}},{key:"render",value:function(){var e=this,t=this.props,a=t.trainLineList,n=t.entryData,l=this.state,r=l.date,s=l.direction,c=l.engines,o=l.isActive,u=l.isEntryValid,m=l.notes,d=l.time,h="hidden";return u||(h=""),console.log(n),i.a.createElement("div",null,i.a.createElement("button",{className:"edit-entry-button",onClick:this.displayForm,type:"button"},i.a.createElement("span",{className:"text-button"},"Edit Entry")),i.a.createElement("form",{className:"login-form app-form ".concat(o?"":"hidden"),onSubmit:this.handleSubmit},i.a.createElement("label",{className:"form-label form-label-date",htmlFor:"date"},i.a.createElement("span",null,"Date"),i.a.createElement("input",{className:"form-input",id:"date",name:"date",type:"date",value:r,onChange:this.handleDateChange})),i.a.createElement("div",{className:"flex-row"},i.a.createElement("label",{className:"form-label form-label-time",htmlFor:"time"},i.a.createElement("span",null,"Time"),i.a.createElement("input",{className:"form-input",id:"time",name:"time",type:"time",value:d,onChange:this.handleTimeChange})),i.a.createElement("label",{className:"form-label form-select-label form-label-direction",htmlFor:"direction"},i.a.createElement("span",null,"Direction"),i.a.createElement("select",{className:"form-select",id:"direction",name:"direction",value:s,onChange:this.handleDirectionChange},i.a.createElement("option",{value:"north"},"North"),i.a.createElement("option",{value:"south"},"South")))),c.map(function(t){return i.a.createElement(H,{id:t.id,key:t.id,line:t.line,location:t.location,number:t.number,removeEngine:e.removeEngine,trainLineList:a,updateEngines:e.updateEngines})}),i.a.createElement("button",{className:"text-button add-engine-button",type:"button",onClick:this.addEngine},"Add Another Engine"),i.a.createElement("label",{className:"form-label form-label-notes",htmlFor:"notes"},i.a.createElement("span",null,"Notes"),i.a.createElement("textarea",{className:"form-textarea",id:"notes",name:"notes",value:m,onChange:this.handleNotesChange})),i.a.createElement("div",{className:"form-action-buttons"},i.a.createElement("button",{className:"submit-button add-button",type:"submit"},"Add Entry"),i.a.createElement("button",{className:"cancel-button",type:"button",onClick:this.handleCancel})),i.a.createElement("div",{className:"form-error ".concat(h)},"There was an error adding the entry. Please try again.")))}}]),t}(n.Component),z=Object(s.b)(function(e){return{trainLineList:e.trainLines.items}})(Y);var K=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(N.a)(t).call(this,e))).state={loadedClass:""},a}return Object(O.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=setTimeout(function(){e.setState({loadedClass:"detail-loaded"}),clearInterval(t)},250)}},{key:"editEntry",value:function(){console.log(this)}},{key:"render",value:function(){var e=this.props,t=e.onDetailClose,a=e.data,n=e.entries,l=e.isLoggedIn,r=this.state.loadedClass;return i.a.createElement("div",{className:"detail-overlay ".concat(r)},i.a.createElement("div",{className:"detail-bg",role:"none",onClick:t}),i.a.createElement("div",{className:"detail-panel"},i.a.createElement("div",{className:"detail-header"},i.a.createElement("div",{className:"detail-header-inner"},i.a.createElement("span",{className:"entry-number"},"Entry No.\xa0",a.number),i.a.createElement("button",{className:"close-button",type:"button",onClick:t}))),i.a.createElement("div",{className:"detail-body"},i.a.createElement("div",{className:"detail-body-inner"},i.a.createElement("div",{className:"detail-headline"},"".concat(a.engines.length," engine train observed on ").concat(function(e,t){var a=e.split("/");return"".concat(t[a[0]-1]," ").concat(a[1],", ").concat(a[2])}(a.date,V)," at ").concat(function(e){var t=e.split(":"),a="a.m.";return-1!==e.indexOf("PM")&&(a="p.m."),"".concat(t[0],":").concat(t[1]," ").concat(a)}(a.time)," heading ").concat(a.direction,".")),i.a.createElement("div",{className:"detail-subhead"},"Engines"),i.a.createElement("table",{className:"detail-table",cellPadding:"0",cellSpacing:"0"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Ord."),i.a.createElement("th",null,"Line"),i.a.createElement("th",null,"No."),i.a.createElement("th",null,"Pos."),i.a.createElement("th",null,"Sightings"))),i.a.createElement("tbody",null,a.engines.map(function(e){var t={backgroundColor:e.color};return i.a.createElement("tr",{key:e.number},i.a.createElement("td",null,i.a.createElement("span",{className:"engine-color-indicator",style:t},e.order)),i.a.createElement("td",null,i.a.createElement("span",null,e.line)),i.a.createElement("td",null,i.a.createElement("span",null,e.number)),i.a.createElement("td",null,i.a.createElement("span",null,e.location)),i.a.createElement("td",null,i.a.createElement("span",null,function(e,t,a){return console.log("".concat(e,", ").concat(t,", ").concat(a.length)),""}(e.line,e.number,n))))}))),i.a.createElement("div",{className:"detail-subhead"},"Notes"),i.a.createElement("p",{className:"detail-notes"},a.notes))),l&&i.a.createElement(z,{entryData:a})))}}]),t}(n.Component),X=Object(s.b)(function(e){return{isLoggedIn:e.userStatus.isLoggedIn}})(K),q=function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"menu-nav-item"},"About the Project"),i.a.createElement("p",null,"Trainspotted is my home office, looking out a backyard window at the Milwaukee District North tracks across the alley. During off-peak hours, freight trains are cleared to run along the Metra corridor. Much like my work situation, the trains don\u2019t adhere to a schedule. This is an exercise in applying structure to the chaos surrounding this new phase of my life."),i.a.createElement("p",null,"This project also brought me up to speed with React/Redux and was developed using the full MERN stack."))},Z=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(N.a)(t).call(this,e))).state={date:"",direction:"north",engines:[{id:"engine-no-0",line:"",number:"",location:"",isValid:!1}],idIter:0,isEntryValid:!0,notes:"",time:""},a.handleDateChange=a.handleDateChange.bind(Object(C.a)(a)),a.handleTimeChange=a.handleTimeChange.bind(Object(C.a)(a)),a.handleDirectionChange=a.handleDirectionChange.bind(Object(C.a)(a)),a.handleNotesChange=a.handleNotesChange.bind(Object(C.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(C.a)(a)),a.handleCancel=a.handleCancel.bind(Object(C.a)(a)),a.displayForm=a.displayForm.bind(Object(C.a)(a)),a.addEngine=a.addEngine.bind(Object(C.a)(a)),a.removeEngine=a.removeEngine.bind(Object(C.a)(a)),a.updateEngines=a.updateEngines.bind(Object(C.a)(a)),a.reset=a.reset.bind(Object(C.a)(a)),a}return Object(O.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=new Date;this.setState({date:B(e),time:G(e)})}},{key:"handleDateChange",value:function(e){this.setState({date:e.target.value})}},{key:"handleTimeChange",value:function(e){this.setState({time:e.target.value})}},{key:"handleDirectionChange",value:function(e){this.setState({direction:e.target.value})}},{key:"handleNotesChange",value:function(e){this.setState({notes:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this.props.dispatch,a=this.state,n=a.date,i=a.direction,l=a.engines,r=a.notes,s=a.time,c=!0;e.preventDefault(),l.forEach(function(e){e.isValid||(c=!1)}),c&&(t(v({date:J(n),direction:i,engines:l.map(function(e,t){return{line:e.line,number:e.number,order:t+1,location:e.location}}),id:Q(n,s),notes:r,time:W(s)})),this.reset()),this.setState({isEntryValid:c})}},{key:"handleCancel",value:function(e){e.preventDefault(),this.reset()}},{key:"reset",value:function(){var e=new Date;this.setState({date:B(e),direction:"north",idIter:0,isEntryValid:!0,engines:[{id:"engine-no-0",isValid:!1,line:"",location:"",number:"",notes:""}],time:G(e)})}},{key:"displayForm",value:function(){(0,this.props.setActiveMenuItem)("add-entry")}},{key:"addEngine",value:function(){var e=this.state,t=e.engines,a=e.idIter+1;t.push({id:"engine-no-".concat(a),line:"",number:"",location:"",isValid:!1}),this.setState({idIter:a}),this.setState({engines:t})}},{key:"removeEngine",value:function(e){var t=this.state.engines,a=t.findIndex(function(t){return t.id===e});t.splice(a,1),this.setState({engines:t})}},{key:"updateEngines",value:function(e,t,a,n,i){var l=this.state.engines.find(function(t){return t.id===e});null!==l&&(l.line=a,l.location=n,l.number=i,l.isValid=t)}},{key:"render",value:function(){var e=this,t=this.props,a=t.isActive,n=t.trainLineList,l=this.state,r=l.date,s=l.direction,c=l.engines,o=l.isEntryValid,u=l.notes,m=l.time,d="hidden";return o||(d=""),i.a.createElement("div",null,i.a.createElement("button",{className:"menu-nav-item menu-nav-button",onClick:this.displayForm,type:"button"},"Add an Entry"),i.a.createElement("form",{className:"login-form app-form ".concat(a?"":"hidden"),onSubmit:this.handleSubmit},i.a.createElement("label",{className:"form-label form-label-date",htmlFor:"date"},i.a.createElement("span",null,"Date"),i.a.createElement("input",{className:"form-input",id:"date",name:"date",type:"date",value:r,onChange:this.handleDateChange})),i.a.createElement("div",{className:"flex-row"},i.a.createElement("label",{className:"form-label form-label-time",htmlFor:"time"},i.a.createElement("span",null,"Time"),i.a.createElement("input",{className:"form-input",id:"time",name:"time",type:"time",value:m,onChange:this.handleTimeChange})),i.a.createElement("label",{className:"form-label form-select-label form-label-direction",htmlFor:"direction"},i.a.createElement("span",null,"Direction"),i.a.createElement("select",{className:"form-select",id:"direction",name:"direction",value:s,onChange:this.handleDirectionChange},i.a.createElement("option",{value:"north"},"North"),i.a.createElement("option",{value:"south"},"South")))),c.map(function(t){return i.a.createElement(H,{id:t.id,key:t.id,line:t.line,location:t.location,number:t.number,removeEngine:e.removeEngine,trainLineList:n,updateEngines:e.updateEngines})}),i.a.createElement("button",{className:"text-button add-engine-button",type:"button",onClick:this.addEngine},"Add Another Engine"),i.a.createElement("label",{className:"form-label form-label-notes",htmlFor:"notes"},i.a.createElement("span",null,"Notes"),i.a.createElement("textarea",{className:"form-textarea",id:"notes",name:"notes",value:u,onChange:this.handleNotesChange})),i.a.createElement("div",{className:"form-action-buttons"},i.a.createElement("button",{className:"submit-button add-button",type:"submit"},"Add Entry"),i.a.createElement("button",{className:"cancel-button",type:"button",onClick:this.handleCancel})),i.a.createElement("div",{className:"form-error ".concat(d)},"There was an error adding the entry. Please try again.")))}}]),t}(n.Component),$=Object(s.b)(function(e){return{trainLineList:e.trainLines.items}})(Z),ee=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(N.a)(t).call(this,e))).state={lineName:"",lineShortName:"",lineColor:"",isEntryValid:!0},a.handleLineNameChange=a.handleLineNameChange.bind(Object(C.a)(a)),a.handleLineShortNameChange=a.handleLineShortNameChange.bind(Object(C.a)(a)),a.handleLineColorChange=a.handleLineColorChange.bind(Object(C.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(C.a)(a)),a.displayForm=a.displayForm.bind(Object(C.a)(a)),a}return Object(O.a)(t,e),Object(g.a)(t,[{key:"handleLineNameChange",value:function(e){this.setState({lineName:e.target.value})}},{key:"handleLineShortNameChange",value:function(e){this.setState({lineShortName:e.target.value})}},{key:"handleLineColorChange",value:function(e){this.setState({lineColor:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this.props.dispatch,a=this.state,n=a.lineName,i=a.lineShortName,l=a.lineColor;console.log("".concat(n,","));var r=!0;e.preventDefault(),""===n&&(r=!1),r&&(t(function(e){var t=e.lineName,a=e.lineShortName,n=e.lineColor,i=e.id;return function(e){return e({type:"SUBMIT_TRAIN_LINE"}),fetch("/addTrainLine",{method:"POST",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify({lineName:t,lineShortName:a,lineColor:n,id:i})}).then(function(e){return e.json()}).then(function(t){return e(m(t))})}}({lineName:n,lineShortName:i,lineColor:l,id:n.toLowerCase().replace(/\s/,"-")})),this.reset()),this.setState({isEntryValid:r})}},{key:"handleCancel",value:function(e){e.preventDefault(),this.reset()}},{key:"reset",value:function(){this.setState({lineName:""})}},{key:"displayForm",value:function(){(0,this.props.setActiveMenuItem)("add-line")}},{key:"render",value:function(){var e=this.props.isActive,t=this.state,a=t.lineName,n=t.lineShortName,l=t.lineColor,r="hidden";return t.isEntryValid||(r=""),i.a.createElement("div",null,i.a.createElement("button",{className:"menu-nav-item menu-nav-button",onClick:this.displayForm,type:"button"},"Add a Train Line"),i.a.createElement("form",{className:"login-form app-form ".concat(e?"":"hidden"),onSubmit:this.handleSubmit},i.a.createElement("label",{className:"form-label form-label-line-name",htmlFor:"lineName"},i.a.createElement("span",null,"Name"),i.a.createElement("input",{className:"form-input",id:"lineName",name:"lineName",type:"text",value:a,onChange:this.handleLineNameChange})),i.a.createElement("label",{className:"form-label form-label-line-short-name",htmlFor:"lineShortName"},i.a.createElement("span",null,"Short Name"),i.a.createElement("input",{className:"form-input",id:"lineShortName",name:"lineShortName",type:"text",value:n,onChange:this.handleLineShortNameChange})),i.a.createElement("label",{className:"form-label form-label-line-color",htmlFor:"lineColor"},i.a.createElement("span",null,"Color"),i.a.createElement("input",{className:"form-input",id:"lineColor",name:"lineColor",type:"text",value:l,onChange:this.handleLineColorChange})),i.a.createElement("div",{className:"form-action-buttons"},i.a.createElement("button",{className:"submit-button add-button",type:"submit"},"Add Line"),i.a.createElement("button",{className:"cancel-button",type:"button",onClick:this.handleCancel})),i.a.createElement("div",{className:"form-error ".concat(r)},"There was an error signing in. Please recheck.")))}}]),t}(n.Component),te=Object(s.b)()(ee),ae=function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"menu-nav-item"},"Contact"),i.a.createElement("p",null,"jef.a.mayer(at)gmail.com",i.a.createElement("br",null),i.a.createElement("a",{className:"inline-link",href:"https://jefmayer.com"},"jefmayer.com")))},ne=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(N.a)(t).call(this,e))).state={user:"",password:""},a.handleUserChange=a.handleUserChange.bind(Object(C.a)(a)),a.handlePasswordChange=a.handlePasswordChange.bind(Object(C.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(C.a)(a)),a.logout=a.logout.bind(Object(C.a)(a)),a.displayForm=a.displayForm.bind(Object(C.a)(a)),a}return Object(O.a)(t,e),Object(g.a)(t,[{key:"handleUserChange",value:function(e){this.setState({user:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this.props.dispatch,a=this.state,n=a.user,i=a.password;e.preventDefault(),t(function(e){var t=e.user,a=e.password;return function(e){return e({type:"REQUEST_ENTRIES"}),fetch("/login",{method:"POST",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify({user:t,password:a})}).then(function(e){return e.json()}).then(function(t){return e(function(e){return{type:"LOG_IN",data:e}}(t))})}}({user:n,password:i}))}},{key:"displayForm",value:function(){(0,this.props.setActiveMenuItem)("login")}},{key:"logout",value:function(){var e=this.props,t=e.dispatch;(0,e.setActiveMenuItem)(""),t({type:"LOG_OUT"})}},{key:"render",value:function(){var e=this.props,t=e.isActive,a=e.isLoggedIn,n=e.isLoginError,l=this.state,r=l.user,s=l.password,c="hidden";return n&&(c=""),a?i.a.createElement("button",{className:"menu-nav-item menu-nav-button",type:"button",onClick:this.logout},"Logout"):i.a.createElement("div",null,i.a.createElement("button",{className:"menu-nav-item menu-nav-button",onClick:this.displayForm,type:"button"},"Login"),i.a.createElement("form",{className:"login-form app-form ".concat(t?"":"hidden"),onSubmit:this.handleSubmit},i.a.createElement("label",{className:"form-label",htmlFor:"user"},i.a.createElement("span",null,"Name"),i.a.createElement("input",{className:"form-input",id:"user",name:"user",type:"text",value:r,onChange:this.handleUserChange})),i.a.createElement("label",{className:"form-label",htmlFor:"password"},i.a.createElement("span",null,"Password"),i.a.createElement("input",{className:"form-input",id:"password",name:"password",type:"password",value:s,onChange:this.handlePasswordChange})),i.a.createElement("input",{className:"submit-button",type:"submit",value:"Login"}),i.a.createElement("div",{className:"form-error ".concat(c)},"There was an error signing in. Please recheck.")))}}]),t}(n.Component),ie=Object(s.b)(function(e){var t=e.userStatus;return{isLoggedIn:t.isLoggedIn,isLoginError:t.isLoginError}})(ne),le=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(y.a)(this,Object(N.a)(t).call(this,e))).state={activeMenuItem:""},a.divRef=i.a.createRef(),a.setActiveMenuItem=a.setActiveMenuItem.bind(Object(C.a)(a)),a}return Object(O.a)(t,e),Object(g.a)(t,[{key:"componentDidUpdate",value:function(){var e=this;if("closed"===this.props.menuDisplayClass)var t=setTimeout(function(){e.divRef.current.setAttribute("style","position:absolute;"),clearTimeout(t)},150);else this.divRef.current.setAttribute("style","position:fixed;")}},{key:"setActiveMenuItem",value:function(e){this.setState({activeMenuItem:e})}},{key:"render",value:function(){var e=this.state.activeMenuItem,t=this.props,a=t.isLoggedIn,n=t.menuDisplayClass,l=t.onMenuClick;return i.a.createElement("div",{className:"menu-container ".concat(n),ref:this.divRef},i.a.createElement("button",{className:"menu-button",onClick:l,type:"button"},i.a.createElement("span",{className:"menu-icon"},i.a.createElement("span",{className:"menu-bar"}),i.a.createElement("span",{className:"menu-bar"}),i.a.createElement("span",{className:"menu-bar"}))),i.a.createElement("div",{className:"menu-nav"},i.a.createElement("div",{className:"menu-nav-inner"},i.a.createElement(q,null),i.a.createElement(ae,null),a&&i.a.createElement("div",null,i.a.createElement($,{setActiveMenuItem:this.setActiveMenuItem,isActive:"add-entry"===e}),i.a.createElement(te,{setActiveMenuItem:this.setActiveMenuItem,isActive:"add-line"===e})),i.a.createElement(ie,{setActiveMenuItem:this.setActiveMenuItem,isActive:"login"===e}))))}}]),t}(n.Component),re=Object(s.b)(function(e){return{isLoggedIn:e.userStatus.isLoggedIn}})(le),se=a(20),ce=a.n(se),oe=(a(32),function(e){function t(){return Object(f.a)(this,t),Object(y.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e(function(e){return e({type:"REQUEST_ENTRIES"}),fetch("/getEntries").then(function(e){return e.json()}).then(function(t){return e(function(e){return{type:"RECEIVE_ENTRIES",data:e}}(t))})}),e(function(e){return e({type:"REQUEST_LINES"}),fetch("/getLines").then(function(e){return e.json()}).then(function(t){return e(function(e){return{type:"RECEIVE_LINES",data:e}}(t))})})}},{key:"render",value:function(){var e,t=this.props,a=t.detailId,n=t.dispatch,l=t.entries,r=t.isDetailOpen,s=t.isMenuOpen;return i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"app-header"},i.a.createElement("div",{className:"logo-wrapper"},i.a.createElement("img",{src:ce.a,className:"logo-graphic",alt:"Trainspotted Logo"}),i.a.createElement("div",{className:"logo-type"},"Trainspotted")),i.a.createElement(re,{menuDisplayClass:s?"open":"closed",onMenuClick:function(){n(s?p():b())}})),i.a.createElement(x,null),i.a.createElement(U,{entries:l}),r&&i.a.createElement(X,{onDetailClose:function(){n(h())},data:(e=a,l.find(function(t){return t._id===e})),entries:l}))}}]),t}(n.Component)),ue=Object(s.b)(function(e){var t=e.entryData,a=e.entryDetail,n=e.menu,i=t.items;return{detailId:a.id,entries:i,isDetailOpen:a.isOpen,isMenuOpen:n.isOpen}})(oe),me=[o.a];var de=Object(c.d)(E,c.a.apply(void 0,me));console.log(de.getState()),r.a.render(i.a.createElement(s.a,{store:de},i.a.createElement(ue,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.49651412.chunk.js.map