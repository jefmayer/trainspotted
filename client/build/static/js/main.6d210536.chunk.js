(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,n){e.exports=n.p+"static/media/trainspotted-logo.f965f559.svg"},22:function(e,t,n){e.exports=n(33)},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(11),c=n.n(r),i=n(9),s=n(6),u=n(19),o=(n(31),n(8)),m=function(e){return{type:"SHOW_DETAIL",data:e}},d=function(){return{type:"HIDE_DETAIL"}},p=function(){return{type:"SHOW_MENU"}},E=function(){return{type:"HIDE_MENU"}},v=Object(s.c)({entryData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,items:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_ENTRIES":return Object(o.a)({},e,{isFetching:!0});case"RECEIVE_ENTRIES":return Object(o.a)({},e,{isFetching:!1,items:t.data});default:return e}},entryDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isOpen:!1,id:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_DETAIL":return Object(o.a)({},e,{isOpen:!0,id:t.data});case"HIDE_DETAIL":return Object(o.a)({},e,{isOpen:!1,id:t.data});default:return e}},menu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isOpen:!1,isLoggedIn:!1,items:["About the Project","Contact","Login"]};switch((arguments.length>1?arguments[1]:void 0).type){case"SHOW_MENU":return Object(o.a)({},e,{isOpen:!0});case"HIDE_MENU":return Object(o.a)({},e,{isOpen:!1});default:return e}}}),b=n(1),f=n(2),h=n(5),y=n(3),O=n(4),g=n(21),N=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(h.a)(this,Object(y.a)(t).call(this,e))).divRef=l.a.createRef(),n}return Object(O.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.entry,t=e.time.split(":");-1!==e.time.indexOf("PM")&&-1===e.time.indexOf("12:")&&(t[0]=parseInt(t[0],10)+12),-1!==e.time.indexOf("AM")&&-1!==e.time.indexOf("12:")&&(t[0]=parseInt(t[0],10)-12);var n=((3600*t[0]+60*parseInt(t[1],10))/864).toFixed(2);this.divRef.current.setAttribute("style","left:".concat(n,"%;"))}},{key:"render",value:function(){var e=this.props,t=e.entry,n=e.dispatch;function a(){n(m(t._id))}return l.a.createElement("button",{className:"engine-manifest",ref:this.divRef,type:"button",onClick:a,onKeyDown:a},t.engines.map(function(e){var t={backgroundColor:e.color};return l.a.createElement("span",{className:"engine-number",style:t,key:e.number},e.number)}),l.a.createElement("span",{className:"engine-details-button"},"..."))}}]),t}(a.Component),j=Object(i.b)(function(e){return Object(s.b)({showDetail:m},e)})(N),M=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(h.a)(this,Object(y.a)(t).call(this,e))).divRef=l.a.createRef(),n.entryHeight=0,n}return Object(O.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.divRef.current.setAttribute("style","height:".concat(this.entryHeight,"px;"))}},{key:"render",value:function(){var e=this,t=this.props.date,n=this.props.entries;return l.a.createElement("div",{className:"entries-for-date",ref:this.divRef},n.map(function(n){return n.date===t?(e.entryHeight<20*n.engines.length&&(e.entryHeight=20*(n.engines.length+1)),l.a.createElement(j,{key:n._id,entry:n})):""}))}}]),t}(a.Component),D=["January","February","March","April","May","June","July","August","September","October","November","December"],I=function(e){var t=e.entries,n=Object(g.a)(new Set(t.map(function(e){return e.date})));return l.a.createElement("div",{className:"train-chart"},l.a.createElement("div",{className:"x-axis-header clearfix"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("span",null,"12 AM")),l.a.createElement("li",null,l.a.createElement("span",null,"2 AM")),l.a.createElement("li",null,l.a.createElement("span",null,"4 AM")),l.a.createElement("li",null,l.a.createElement("span",null,"6 AM")),l.a.createElement("li",null,l.a.createElement("span",null,"8 AM")),l.a.createElement("li",null,l.a.createElement("span",null,"10 AM")),l.a.createElement("li",null,l.a.createElement("span",null,"12 PM")),l.a.createElement("li",null,l.a.createElement("span",null,"2 PM")),l.a.createElement("li",null,l.a.createElement("span",null,"4 PM")),l.a.createElement("li",null,l.a.createElement("span",null,"6 PM")),l.a.createElement("li",null,l.a.createElement("span",null,"8 PM")),l.a.createElement("li",null,l.a.createElement("span",null,"10 PM")))),l.a.createElement("div",{className:"time-table"},l.a.createElement("div",{className:"month-bar"}),n.map(function(e){return l.a.createElement("div",{className:"date-line",key:e},l.a.createElement("div",{className:"month-display"},l.a.createElement("span",null,"".concat(D[e.split("/")[0]-1]," ").concat(e.split("/")[2]))),l.a.createElement("div",{className:"date-display"},l.a.createElement("span",null,e.split("/")[1])),l.a.createElement(M,{date:e,entries:t}))})))},k=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(h.a)(this,Object(y.a)(t).call(this,e))).state={loadedClass:""},n}return Object(O.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=setTimeout(function(){e.setState({loadedClass:"detail-loaded"}),clearInterval(t)},250)}},{key:"render",value:function(){var e=this.props,t=e.onDetailClose,n=e.data,a=this.state.loadedClass;return l.a.createElement("div",{className:"detail-overlay ".concat(a)},l.a.createElement("div",{className:"detail-bg",role:"none",onClick:t}),l.a.createElement("div",{className:"detail-panel"},l.a.createElement("div",{className:"detail-header"},l.a.createElement("div",{className:"detail-header-inner"},l.a.createElement("span",{className:"entry-number"},"Entry No.\xa0",n.number),l.a.createElement("button",{className:"close-button",type:"button",onClick:t}))),l.a.createElement("div",{className:"detail-body"},l.a.createElement("div",{className:"detail-body-inner"},l.a.createElement("div",{className:"detail-headline"},"".concat(n.engines.length," engine train observed on ").concat(function(e){var t=e.split("/");return"".concat(D[t[0]-1]," ").concat(t[1],", ").concat(t[2])}(n.date)," at ").concat(function(e){var t=e.split(":"),n="a.m.";return-1!==e.indexOf("PM")&&(n="p.m."),"".concat(t[0],":").concat(t[1]," ").concat(n)}(n.time)," heading ").concat(n.direction,".")),l.a.createElement("div",{className:"detail-subhead"},"Engines"),l.a.createElement("table",{className:"detail-table",cellPadding:"0",cellSpacing:"0"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Ord."),l.a.createElement("th",null,"Line"),l.a.createElement("th",null,"No."),l.a.createElement("th",null,"Pos."),l.a.createElement("th",null,"Sightings"))),l.a.createElement("tbody",null,n.engines.map(function(e){var t={backgroundColor:e.color};return l.a.createElement("tr",{key:e.number},l.a.createElement("td",null,l.a.createElement("span",{className:"engine-color-indicator",style:t},e.order)),l.a.createElement("td",null,l.a.createElement("span",null,e.line)),l.a.createElement("td",null,l.a.createElement("span",null,e.number)),l.a.createElement("td",null,l.a.createElement("span",null,e.location)),l.a.createElement("td",null,l.a.createElement("span",null,"\xa0")))}))),l.a.createElement("div",{className:"detail-subhead"},"Notes")))))}}]),t}(a.Component),C=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(h.a)(this,Object(y.a)(t).call(this,e))).divRef=l.a.createRef(),n}return Object(O.a)(t,e),Object(f.a)(t,[{key:"componentDidUpdate",value:function(){var e=this;if("closed"===this.props.menuDisplayClass)var t=setTimeout(function(){e.divRef.current.setAttribute("style","position:absolute;"),clearTimeout(t)},150);else this.divRef.current.setAttribute("style","position:fixed;")}},{key:"render",value:function(){var e=this.props,t=e.menuDisplayClass,n=e.navItems,a=e.onMenuClick;return l.a.createElement("div",{className:"menu-container ".concat(t),ref:this.divRef},l.a.createElement("button",{className:"menu-button",onClick:a,type:"button"},l.a.createElement("span",{className:"menu-icon"},l.a.createElement("span",{className:"menu-bar"}),l.a.createElement("span",{className:"menu-bar"}),l.a.createElement("span",{className:"menu-bar"}))),l.a.createElement("div",{className:"menu-nav"},l.a.createElement("div",{className:"menu-nav-inner"},n.map(function(e){return l.a.createElement("button",{className:"menu-nav-item",key:e,type:"button"},e)}))))}}]),t}(a.Component),R=n(20),A=n.n(R),S=(n(32),function(e){function t(){return Object(b.a)(this,t),Object(h.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(function(e){return e({type:"REQUEST_ENTRIES"}),fetch("/getEntries").then(function(e){return e.json()}).then(function(t){return e(function(e){return{type:"RECEIVE_ENTRIES",data:e}}(t))})})}},{key:"render",value:function(){var e,t=this.props,n=t.detailId,a=t.dispatch,r=t.entries,c=t.isDetailOpen,i=t.isMenuOpen,s=t.navItems;return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"app-header"},l.a.createElement("div",{className:"logo-wrapper"},l.a.createElement("img",{src:A.a,className:"logo-graphic",alt:"Trainspotted Logo"}),l.a.createElement("div",{className:"logo-type"},"Trainspotted")),l.a.createElement(C,{menuDisplayClass:i?"open":"closed",navItems:s,onMenuClick:function(){a(i?E():p())}})),l.a.createElement(I,{entries:r}),c&&l.a.createElement(k,{onDetailClose:function(){a(d())},data:(e=n,console.log(e),r.find(function(t){return t._id===e}))}))}}]),t}(a.Component)),T=Object(i.b)(function(e){var t=e.entryData,n=e.entryDetail,a=e.menu,l=t.items;return{detailId:n.id,entries:l,isDetailOpen:n.isOpen,isMenuOpen:a.isOpen,navItems:a.items}})(S),_=[u.a];var w=Object(s.d)(v,s.a.apply(void 0,_));console.log(w.getState()),c.a.render(l.a.createElement(i.a,{store:w},l.a.createElement(T,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.6d210536.chunk.js.map